nj=window.nj||{};
nj.getPackage=function($packageName,$object,$keepPrevious){
    var parts=$packageName.split(".");
    var part=window;
    for(var i=0,length=parts.length,lastIndex=parts.length-1; i<length;	i++)
    {
	part=(part[parts[i]]===undefined)?(part[parts[i]]=(i==lastIndex&&$object)?$object:{}):((i==lastIndex&&$object&&!$keepPrevious)?(part[parts[i]]=$object):part[parts[i]]);
	    }
    return part;
};

nj.getPackage("nj.getBaseUrl", function(){
    return location.protocol+"//"+location.hostname+(location.port?(":"+location.port):"");
});

nj.getPackage("nj.getCombinedUrl",function($urlArray){
    if(arguments.length==1){
	if(typeof $urlArray=="string"){
	    return $urlArray;
	}else
	{
	    if(!$urlArray.length){
		return"";
	    }}
	for(var i=0,urlLength=$urlArray.length,combinedUrl="";
	    i<urlLength;
	    i++){
	    combinedUrl+=i?(($urlArray[i]!==undefined)?"/"+String($urlArray[i]):""):String($urlArray[i]);
	}}
    else{
	for(var i=0,urlLength=arguments.length,combinedUrl="";
	    i<urlLength;
	    i++){
	    combinedUrl+=i?((arguments[i]!==undefined)?"/"+String(arguments[i]):""):String(arguments[i]);
	}}
    return combinedUrl;
});

nj.getPackage("nj.alert",function($oObject,$nItemsPerPage){
    if(typeof($oObject)!=="object"){
	var nStr="";
	for(var i=0,len=arguments.length;
	    i<len;
	    i++){
	    nStr+=arguments[i]+" ";
	}
	alert(nStr);
	return;
    }

    var nItemsPerPage=((typeof($nItemsPerPage)=="number")&&$nItemsPerPage)||20;
    var nPage=0;
    var nCnt=0;
    var aStrs=[""];
    for(var s in $oObject)
    {
	nCnt++;
	aStrs[nPage]+="- "+s+": "+$oObject[s]+"\n";
	if(nCnt>=nItemsPerPage){
	    nCnt=0;
	    nPage++;
	    aStrs.push("");
	}}
    for(var i=0,length=aStrs.length;
	i<length;
	i++){
	alert(aStrs[i]);
    }
});

nj.getPackage("nj.stringByteCount",function(str,lineBreak){var r=0;
str=(lineBreak!==undefined&&lineBreak===true)?str.replace(/\n/g,""):str;
for(var i=0;
i<str.length;
i++){var c=str.charCodeAt(i);
r+=((c>=0&&c<129)||(c==63728)||(c>=65377&&c<65440)||(c>=63729&&c<63732))?1:2;
}return r;
});
nj.getPackage("nj.cutStringByte",function($sString,$nSize,$sSuffix,lineBreak){if($sString===undefined||$sString.length===0){return"";
}var r=0,l=$nSize-nj.stringByteCount($sSuffix),sl=$sString.length,cl,s;
if((sl*2)<l){return $sString;
}for(var i=0;
i<sl;
i++){var c=$sString.charCodeAt(i);
r+=((c>=0&&c<129)||(c==63728)||(c>=65377&&c<65440)||(c>=63729&&c<63732))?1:2;
if(lineBreak!==undefined&&lineBreak===true&&c===10){r-=1;
}if(i===(sl-1)){s=$sString;
break;
}else{if(r>=$nSize){s=$sString.substr(0,cl)+$sSuffix;
break;
}else{if(r>=l){cl=(r===l)?i+1:i;
}}}}return s;
});
nj.getPackage("nj.cutString",function($sString,$nSize,$sSuffix,lineBreak){$nSize+=(lineBreak!==undefined&&lineBreak===true)?($sString.split(/\n/).length)-1:0;
return(!Boolean(Number($nSize))||($sString=String($sString||"")).length<=$nSize)?String($sString||""):$sString.split("",Math.max($nSize-String($sSuffix=(($sSuffix===undefined)?"...":$sSuffix)).length,0)).join("")+$sSuffix;
});
nj.getPackage("nj.cutStr",function(str,myCut){var jpSize,engUpperSize,engLowSize,others,regTag;
if(typeof(arguments[2])=="object"){var oOptions=arguments[2];
jpSize=oOptions.jp;
engUpperSize=oOptions.upper;
engLowSize=oOptions.lower;
others=oOptions.others;
regTag=oOptions.regTag||null;
}else{jpSize=arguments[2];
engUpperSize=arguments[3];
engLowSize=arguments[4];
others=arguments[5];
}var reArr=[];
if(regTag){var reg=new RegExp("<"+regTag+">|</"+regTag+">","ig");
reArr=str.replace(reg,"{0}").split("{0}");
}else{reArr=[str];
}var cnt=0;
var length=0;
var sHankaku="ｱｲｳｴｵｶｷｸｹｺｻｼｽｾｿﾀﾁﾂﾃﾄﾅﾆﾇﾈﾉﾊﾋﾌﾍﾎﾏﾐﾑﾒﾓﾔﾕﾖﾗﾘﾙﾚﾛﾜｦﾝｧｨｩｪｫｬｭｮｯﾞﾟｰ､｡｢｣";
var plainText="";
var ret="";
for(var i=0,l=reArr.length;
i<l;
i++){var strPart=reArr[i];
var strPartCut="";
for(var j=0,m=strPart.length;
j<m;
j++){length=j;
var code=strPart.charAt(j).charCodeAt(0);
if(sHankaku.indexOf(strPart.charAt(j))>=0){cnt+=others;
}else{if(code>=256){cnt+=jpSize;
}else{if(code>=65&&code<=90){cnt+=engUpperSize;
}else{if(code>=97&&code<=122){cnt+=engLowSize;
}else{cnt+=others;
}}}}if(cnt>=myCut){break;
}}strPartCut=strPart.substr(0,length+1);
if(regTag&&(i+1)%2==0){ret+="<"+regTag+">"+strPartCut+"</"+regTag+">";
}else{ret+=strPartCut;
}if(cnt>=myCut){cnt++;
break;
}}return{str:ret,size:Math.floor(cnt)};
});
nj.getPackage("nj.replaceStr",function(sTemplate,oData){var reg=(arguments.length==2)?/\${([A-Za-z0-9_]+)}/g:arguments[2];
return sTemplate.replace(reg,function(m,p){return(oData[p]!==undefined)?oData[p]:"";
});
});
nj.getPackage("nj.escapeHTML",(function(){var ENTITIES={'"':"quot","<":"lt",">":"gt","'":"#39","…":"hellip","©":"copy"},R_AND=/&/g,R_PATTERN=/[<>"'…©]/g;
return function($sStr){var s=$sStr.replace(R_AND,"&amp;");
s=s.replace(R_PATTERN,function(m0){return ENTITIES[m0]?"&"+ENTITIES[m0]+";":m0;
});
return s;
};
})());
nj.getPackage("nj.unescapeHTML",(function(){var ENTITIES={quot:'"',lt:"<",gt:">","#39":"'",hellip:"…",copy:"©"},R_AND=/&amp;/g,R_PATTERN=/&([a-z]+|#[0-9]+);/g;
return function($sStr){var s=$sStr.replace(R_PATTERN,function(m0,m1){return ENTITIES[m1]?ENTITIES[m1]:m0;
});
s=s.replace(R_AND,"&");
return s;
};
})());
nj.getPackage("nj.getScaledSize",function($oTargetSize,$oLimitSize,$bFitToLimitSize){var nWidthRatio=Math.max(0,Number($oLimitSize.width)||0)/Math.max(0,Number($oTargetSize.width)||0);
var nHeightRatio=Math.max(0,Number($oLimitSize.height)||0)/Math.max(0,Number($oTargetSize.height)||0);
var nRatio=(nWidthRatio&&nHeightRatio&&Math.min(nWidthRatio,nHeightRatio))||Math.max(nWidthRatio,nHeightRatio);
nRatio=($bFitToLimitSize?nRatio:Math.min(nRatio,1))||1;
return{width:parseInt($oTargetSize.width*nRatio,10),height:parseInt($oTargetSize.height*nRatio,10)};
});
nj.getPackage("nj.getCenteredPosition",function($oTargetSize,$oLimitSize){return{top:parseInt(($oTargetSize.height&&($oTargetSize.height<$oLimitSize.height))?($oLimitSize.height-$oTargetSize.height)/2:0),left:parseInt(($oTargetSize.width&&($oTargetSize.width<$oLimitSize.width))?($oLimitSize.width-$oTargetSize.width)/2:0)};
});
nj.getPackage("nj.scrollTo",function(elTarget,nMargin){var welTarget=$(elTarget);
nMargin=nMargin||0;
window.scrollTo(0,welTarget.offset().top+nMargin);
});
nj.getPackage("nj.zeroFill",function(n,nDigit){var a=[];
nDigit=nDigit||0;
for(var i=0;
i<nDigit;
i++){a.push(0);
}return(a.join("")+n).slice(-nDigit);
});
nj.getPackage("nj.withComma",function(n){var s,aComma=[],aDec,aMinus;
aDec=(n+"").split(".");
s=aDec[0];
aMinus=s.split("-");
s=aMinus.length>1?aMinus[1]:aMinus[0];
for(var i=s.length;
i>=0;
i--){aComma.unshift(s.charAt(i));
if(aComma.length!==0&&aComma.length%4===0){aComma.unshift(",");
}}if(aComma[0]===","){aComma.shift();
}s=aComma.join("");
s+=(aDec.length>1?"."+aDec[1]:"");
if(aMinus.length>1){s="-"+s;
}return s;
});
nj.getPackage("nj.nl2br",function(s,bxhtml){return s.replace(/\r?\n/mg,bxhtml?"<br />":"<br>");
});
(function(){var ONE_MINUTE=1000*60,ONE_HOUR=ONE_MINUTE*60,ONE_DAY=ONE_HOUR*24,THREE_DAY=ONE_DAY*3;
nj.getPackage("nj.getReadableDate",function(n,format){var nDiff=(+new Date)+$.njDate.getJSTOffset()-n;
format=$.extend({minute:"分前",hour:"時間前",day:"日前",more:"yyyy.mm.dd"},format);
if(nDiff<ONE_MINUTE){return 1+format.minute;
}else{if(nDiff<ONE_HOUR){return Math.floor(nDiff/ONE_MINUTE)+format.minute;
}else{if(nDiff<ONE_DAY){return Math.floor(nDiff/ONE_HOUR)+format.hour;
}else{if(nDiff<THREE_DAY){return Math.floor(nDiff/ONE_DAY)+format.day;
}else{return $.njDate(format.more,n);
}}}}});
})();
(function(){var REG_NAME=/^[^\.]/,REG_EXT=/\.(.+)$/,REG_FILE=/^(.+)\.(.+)$/;
nj.getPackage("nj.file",{getInfo:function(s){return{name:this.getFileName(s),extension:this.getExtension(s)};
},getExtension:function(s){s+="";
return REG_NAME.test(s)?s.replace(REG_FILE,"$2"):"";
},getFileName:function(s){s+="";
return REG_EXT.test(s)?s.replace(REG_FILE,"$1"):"";
},omitFileName:function(sName,nLength){var o,nExtLen,nNameLen;
if(nj.stringByteCount(sName)<=nLength){return sName;
}o=this.getInfo(sName);
nExtLen=nj.stringByteCount(o.extension);
if(nExtLen===0){return nj.cutStringByte(sName,nLength,"…");
}if(nExtLen>nLength-".".length-nj.stringByteCount("…")){return nj.cutStringByte(sName,nLength,"…");
}nLength-=nExtLen;
return nj.cutStringByte(o.name+".",nLength,"…")+o.extension;
}});
})();
nj.getPackage("nj.keyCode",{ENTER:13,ALT:16,CTRL:17,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40});
nj.getPackage("nj.EventDispatcher",(function(NAME,EventDispatcher){EventDispatcher=function(){};
EventDispatcher.NAME=NAME;
EventDispatcher.prototype={_eventMap:function(){return this._aEventMap||(this._aEventMap={});
},addEventListener:function($sType,$fnListener,$oScope,$nPriority){if(!($sType&&(typeof($sType)=="string")&&$fnListener&&(typeof($fnListener)=="function"))){return false;
}var aEventMap=(this._eventMap()[$sType]||(this._eventMap()[$sType]=[]));
var oNewEvent={listener:$fnListener,scope:$oScope,priority:($nPriority&&typeof($nPriority)=="number")?$nPriority:0};
if(oNewEvent.priority&&aEventMap.length){for(var i=0,length=aEventMap.length;
i<length;
i++){oEvent=aEventMap[i];
if(oEvent.priority<oNewEvent.priority){aEventMap.splice(i,0,oNewEvent);
break;
}if(i==length-1){aEventMap.push(oNewEvent);
}}}else{aEventMap.push(oNewEvent);
}return true;
},dispatchEvent:function($sType,$oData){var nDispatchedEventLength=0;
for(var i=0,aEventMap=this._eventMap()[$sType],length=(aEventMap?aEventMap.length:0);
i<length;
i++){var oAddedEvent=aEventMap[i];
var oEvent={target:this};
if(oAddedEvent.scope){oEvent.currentTarget=oAddedEvent.scope;
}if($oData){oEvent.data=$oData;
}oAddedEvent.listener.apply(oAddedEvent.scope||this,[oEvent].concat(Array.prototype.slice.call(arguments,2,arguments.length)));
nDispatchedEventLength++;
}if(nDispatchedEventLength){return true;
}return false;
},hasEventListener:function($sType){return Boolean(this._eventMap()[$sType]&&this._eventMap()[$sType].length);
},removeEventListener:function($sType,$fnListener,$oScope){var removedEventListenerLength=0;
for(var i=0,aEventMap=this._eventMap()[$sType],length=(aEventMap?aEventMap.length:0);
i<length;
i++){var oAddedEvent=aEventMap[i];
if((oAddedEvent.listener==$fnListener)&&((oAddedEvent.scope&&$oScope)?(oAddedEvent.scope==$oScope):true)){aEventMap.splice(i,1);
length=aEventMap.length;
i--;
removedEventListenerLength++;
}}if(removedEventListenerLength){if(!aEventMap.length){aEventMap=null;
delete this._eventMap()[$sType];
}return true;
}return false;
}};
								   return EventDispatcher;
								  })("nj.EventDispatcher"));

(function($){
    nj.getPackage("nj.UIClassBase", new (function($NAME){
	var ERROR={
	    SINGLETON_WIDGET_DUPLICATED:function($sWidgetName){
		return new Error("["+$NAME+"] Widget "+$sWidgetName+" must be created with only one element");
	    },
	    WIDGET_UNDEFINED:function($sWidgetName)
	    {
		return new Error("["+$NAME+"] Widget "+$sWidgetName+" is undefined.");
	    }
	};
	function UIClassBase(){}UIClassBase.NAME=$NAME;
	UIClassBase.prototype={_data:function($sKey_$oReferences,$oValue){
	    var sKey;
	    var fn=arguments.callee;
	    if(!arguments.length){
		return this._oDataMap;
	    }else{
		if(arguments.length===1&&typeof $sKey_$oReferences==="string"){
		    sKey=$sKey_$oReferences;
		    return fn.call(this)&&fn.call(this)[sKey];
		}else{
		    if(typeof $sKey_$oReferences==="string"){
			sKey=$sKey_$oReferences;
			this._oDataMap=this._oDataMap||{};
			if((this._oDataMap[sKey]=$oValue)===undefined){
			    delete this._oDataMap[sKey];
			}
			return this._oDataMap[sKey];
		    }else{
			if(typeof $sKey_$oReferences==="object"){
			    var oNewObjReferences=$sKey_$oReferences;
			    for(sKey in oNewObjReferences){fn.call(this,sKey,oNewObjReferences[sKey]);
							  }
			    return fn.call(this);
			}}}}
	    return undefined;
	},
			       _jqElements:function($elContainer_$sKey,$oReferences_$jqElement){var sKey,jqElement,oNewElementReference;
var fn=arguments.callee;
if(!arguments.length){return this._oJqElementsMap;
}else{if(arguments.length===1&&typeof $elContainer_$sKey==="string"){sKey=$elContainer_$sKey;
return fn.call(this)&&fn.call(this)[sKey];
}else{if(arguments.length>=2){if(typeof $elContainer_$sKey==="string"){sKey=$elContainer_$sKey;
oNewElementReference=$oReferences_$jqElement;
jqElement=oNewElementReference?$(oNewElementReference,arguments[2]):oNewElementReference;
if(jqElement===null||jqElement===undefined||jqElement.length){this._oJqElementsMap=this._oJqElementsMap||{};
if((this._oJqElementsMap[sKey]=jqElement)===undefined){delete this._oJqElementsMap[sKey];
}return this._oJqElementsMap[sKey];
}}else{var jqContainer=$elContainer_$sKey;
var oReferences=$oReferences_$jqElement;
for(sKey in oReferences){fn.call(this,sKey,oReferences[sKey],jqContainer);
}return this._oJqElementsMap;
}}}}return undefined;
},_widget:function($sKey,$sWidgetName,$jqElement){if($jqElement&&$jqElement.jquery){return this._excuteWidget.apply(this,[this._jqElements($sKey,$jqElement),$sWidgetName].concat([].slice.call(arguments,3,arguments.length)));
}return this._excuteWidget.apply(this,[$sKey,$sWidgetName].concat([].slice.call(arguments,2,arguments.length)));
},_singletonWidget:function($sWidgetName,$jqElement_$sMethodName,$oOptions){var fn=arguments.callee;
if(!arguments.length){return this._oSingletonWidgetElementsMap;
}else{if(arguments.length===1&&typeof $sWidgetName==="string"){return fn.call(this)&&fn.call(this)[$sWidgetName];
}else{if(typeof $jqElement_$sMethodName==="string"){var sMethodName=$jqElement_$sMethodName;
return this._excuteWidget.apply(this,[fn.call(this,$sWidgetName),$sWidgetName,sMethodName].concat([].slice.call(arguments,2,arguments.length)));
}else{var jqElement=$jqElement_$sMethodName;
if(jqElement&&jqElement.length&&jqElement.jquery){var jqWidgetElement;
var jqPreviousWidgetElement=fn.call(this,$sWidgetName);
var bIsSameWidgetElement=jqPreviousWidgetElement&&(jqPreviousWidgetElement.get(0)===jqElement.get(0));
if(jqElement.length>1||(jqPreviousWidgetElement&&!bIsSameWidgetElement)){throw ERROR.SINGLETON_WIDGET_DUPLICATED($sWidgetName);
}else{if(bIsSameWidgetElement){return this._excuteWidget(jqElement,$sWidgetName);
}else{if(!(jqWidgetElement=this._excuteWidget(jqElement,$sWidgetName,$oOptions))){throw ERROR.WIDGET_UNDEFINED($sWidgetName);
}}}return((this._oSingletonWidgetElementsMap||(this._oSingletonWidgetElementsMap={}))[$sWidgetName]=jqWidgetElement);
}}}}return undefined;
},_excuteWidget:function($sKey_$jqElement,$sWidgetName){var jqElement=(typeof $sKey_$jqElement==="string")?this._jqElements($sKey_$jqElement):$sKey_$jqElement;
if(arguments.length===1||!$sWidgetName){return jqElement;
}else{if(jqElement&&typeof jqElement[$sWidgetName]==="function"){return jqElement[$sWidgetName].apply(jqElement,[].slice.call(arguments,2,arguments.length));
}else{return undefined;
}}}};
return UIClassBase;
})("nj.UIClassBase"));
})(jQuery);
(function($){$.extend($,{escapeHTML:function($sString){return $("<div/>").text(String($sString)).html();
},unescapeHTML:function($sString){return $("<div/>").html(String($sString)).text();
}});
})(jQuery);
(function($){nj.getPackage("nj.common.PageCalculator",(function($NAME){var PageCalculator=function($options){this.options=$.extend(true,{currentPage:0,totalLength:0,lengthPerPage:0,onValueUpdate:function(){},onPageChange:function(){}},$options);
this._nTotalLength=0;
this._nLengthPerPage=0;
this._nTotalPages=0;
this._nCurrentPage=0;
this._nCurrentLength=0;
this._nStartIndex=0;
this._nEndIndex=0;
this._bIsEnabled=true;
this._bTriggerEvent=false;
this.setValue(this.options.totalLength,this.options.lengthPerPage,this.options.currentPage);
this.enableEventTrigger();
};
PageCalculator.VALUE_UPDATE=$NAME+".valueUpdate";
PageCalculator.PAGE_CHANGE=$NAME+".pageChange";
PageCalculator.prototype={_updateValues:function($doDispatchEvent){this._nCurrentLength=(this._nCurrentPage!=this._nTotalPages)?this._nLengthPerPage:(this._nTotalLength%this._nLengthPerPage)||this._nLengthPerPage;
this._nStartIndex=(this._nCurrentPage-1)*this._nLengthPerPage;
this._nEndIndex=Math.max(this._nStartIndex+((this._nCurrentPage!=this._nTotalPages)?this._nLengthPerPage:this._nCurrentLength)-1,0);
if($doDispatchEvent&&this._bTriggerEvent){this.options.onValueUpdate.apply(this,[$.extend(this.getPageInfo(),{target:this,type:PageCalculator.VALUE_UPDATE})]);
}},getPageInfo:function(){return{currentPage:this._nCurrentPage,totalPages:this._nTotalPages,lengthPerPage:this._nLengthPerPage,currentLength:this._nCurrentLength,totalLength:this._nTotalLength,startIndex:this._nStartIndex,endIndex:this._nEndIndex};
},setValue:function($totalLength,$lengthPerPage,$currentPage){this._nTotalLength=($totalLength>0)?$totalLength:0;
this._nLengthPerPage=this._nTotalLength?(($lengthPerPage>0)?$lengthPerPage:1):0;
this._nTotalPages=this._nLengthPerPage?Math.ceil(this._nTotalLength/this._nLengthPerPage):0;
this._nCurrentPage=this._nTotalLength?(($currentPage>0)?(($currentPage<=this._nTotalPages)?$currentPage:this._nTotalPages):1):0;
this._updateValues(true);
},nextPage:function(){this.setPage(this._nCurrentPage+1);
},prevPage:function(){this.setPage(this._nCurrentPage-1);
},setPage:function($page){if(!this._bIsEnabled||($page<1)||($page>this._nTotalPages)){return;
}this._nCurrentPage=Math.max(Math.min($page,this._nTotalPages),1);
this._updateValues();
if(this._bTriggerEvent){this.options.onPageChange.apply(this,[$.extend(this.getPageInfo(),{target:this,type:PageCalculator.VALUE_UPDATE})]);
}},disableEventTrigger:function(){this._bTriggerEvent=false;
},enableEventTrigger:function(){this._bTriggerEvent=true;
},enable:function(){this._bIsEnabled=true;
},disable:function(){this._bIsEnabled=false;
}};
return PageCalculator;
})("nj.common.PageCalculator"));
})(jQuery);
(function($){nj.getPackage("errorImage",(function(){var errorImage=function(self,sType,fn){self.onerror=null;
fn=fn||$.noop;
sType=(typeof sType=="undefined"?"default":sType);
try{var oType=errorImage.oData[sType];
if(!oType){var sTypeData=sType.replace(/^([a-z]+)\d+/,"$1");
var nSize=parseInt(sType.replace(/^[a-z]+(\d+)/,"$1"));
if(sTypeData!=="default"&&nSize){sType=sTypeData+nSize+"x"+nSize;
}oType=$.extend({},errorImage.oData[sType]||errorImage.oData["default"]);
}$(self).attr({src:(typeof STATIC_SERVER=="undefined"?errorImage.oData.staticServer:STATIC_SERVER)+oType.src,width:oType.w,height:oType.h});
fn(self);
}catch(e){}};
errorImage.get=function(sType){var oData=errorImage.oData[errorImage.oData[sType]?sType:"default"];
return{src:(typeof STATIC_SERVER=="undefined"?errorImage.oData.staticServer:STATIC_SERVER)+oData.src,w:oData.w,h:oData.h};
};
errorImage.oData={staticServer:typeof STATIC_SERVER==="undefined"?"http://static.naver.jp":STATIC_SERVER,"default":{src:"/matome_ver4/img/common/no_img/default_120x120.png",w:120,h:120},image45x45:{src:"/matome_ver4/img/common/no_img/image_45x45.png",w:45,h:45},image60x60:{src:"/matome_ver4/img/common/no_img/image_60x60.png",w:60,h:60},image65x65:{src:"/matome_ver4/img/common/no_img/image_65x65.png",w:65,h:65},image95x95:{src:"/matome_ver4/img/common/no_img/image_95x95.png",w:95,h:95},image100x100:{src:"/matome_ver4/img/common/no_img/image_100x100.png",w:100,h:100},image170x130:{src:"/matome_ver4/img/common/no_img/image_170x130-2.png",w:170,h:130},feedImage110x65:{src:"/matome_ver4/img/common/no_img/feed_image_110x65.png",w:110,h:65},feedImage170x130:{src:"/matome_ver4/img/common/no_img/feed_image_170x130.png",w:170,h:130},image300x300:{src:"/matome_ver4/img/common/no_img/image_300x300.png",w:300,h:300},photo40x40:{src:"/matome_ver4/img/common/no_img/photo_40x40.png",w:40,h:40},photo60x60:{src:"/matome_ver4/img/common/no_img/photo_60x60.png",w:60,h:60},photo95x95:{src:"/matome_ver4/img/common/no_img/photo_95x95.png",w:95,h:95},photo120x90:{src:"/matome_ver4/img/common/no_img/photo_120x90.png",w:120,h:90},photo120x120:{src:"/matome_ver4/img/common/no_img/photo_120x120.png",w:120,h:120},photo150x150:{src:"/matome_ver4/img/common/no_img/photo_150x150.png",w:150,h:150},photo160x160:{src:"/matome_ver4/img/common/no_img/photo_160x160.png",w:160,h:160},photo300x220:{src:"/matome_ver4/img/common/no_img/photo_300x220.png",w:300,h:220},video120x90:{src:"/matome_ver4/img/common/no_img/video_120x90.png",w:120,h:90},video300x220:{src:"/matome_ver4/img/common/no_img/video_300x220.png",w:300,h:220},video480x360:{src:"/matome_ver4/img/common/no_img/video_480x360.png",w:480,h:360},user16x16:{src:"/matome_ver4/img/common/no_img/user_18x18.png",w:16,h:16},user18x18:{src:"/matome_ver4/img/common/no_img/user_18x18.png",w:18,h:18},user20x20:{src:"/matome_ver4/img/common/no_img/user_20x20.png",w:20,h:20},user30x30:{src:"/matome_ver4/img/common/no_img/user_40x40.png",w:30,h:30},user40x40:{src:"/matome_ver4/img/common/no_img/user_40x40.png",w:40,h:40},user45x45:{src:"/matome_ver4/img/common/no_img/user_45x45.png",w:45,h:45},user51x51:{src:"/matome_ver4/img/common/no_img/user_51x51.png",w:51,h:51},user55x55:{src:"/matome_ver4/img/common/no_img/user_55x55.png",w:55,h:55},user80x80:{src:"/matome_ver4/img/common/no_img/user_80x80.png",w:80,h:80},user120x120:{src:"/matome_ver4/img/common/no_img/user_120x120.png",w:120,h:120},twitter48x48:{src:"/matome_ver4/img/common/no_img/twitter_48x48.png?121114",w:48,h:48},favicon16x16:{src:"/matome_ver4/img/common/no_img/favicon_16x16.png",w:16,h:16},favoritePhoto300x300:{src:"/matome_ver4/img/common/no_img/image_300x300.png",w:300,h:300}};
var USER_IMAGE_SIZE_LIST=(function(){var a=[],r=/^user(\d+)$/;
$.each(errorImage.oData,function(s){if(r.test(s)){a.push(parseInt(s.replace(r,"$1")));
}});
return a;
})();
return errorImage;
})());
nj.getPackage("onloadCheck",function(elImg,width,height,resize){elImg.onload=null;
if(resize){resizeImage(elImg,width,height);
}});
nj.getPackage("onerrorCheck",function(elImg,thumbnailUrl){elImg.onerror=null;
elImg.removeAttribute("width");
elImg.removeAttribute("height");
if(thumbnailUrl==""){elImg.src="/img/Gone";
}else{elImg.src=thumbnailUrl;
}});
nj.getPackage("resizeImage",function(self,nMaxW,nMaxH,nSearchW,nSearchH){var oNewSize=calcuImageResize(parseInt(self.width)==0?nSearchW:parseInt(self.width),parseInt(self.height)==0?nSearchH:parseInt(self.height),nMaxW,nMaxH);
self.width=oNewSize.width;
self.height=oNewSize.height;
});
nj.getPackage("resizeAddZoom",function(self){self.parentNode.parentNode.style.zoom="1";
self.parentNode.parentNode.parentNode.style.zoom="1";
});
nj.getPackage("calcuImageResize",function(nW,nH,nMaxW,nMaxH){nW=nW||nMaxW;
nH=nH||nMaxH;
if(!nMaxH){nMaxH=nH||600;
}if(!nMaxW){nMaxW=nW||300;
}if(nW>=nMaxW&&nH>=nMaxH){var nWP=(100*nW)/nMaxW;
var nHP=(100*nH)/nMaxH;
if(nWP>nHP){nW=nMaxW;
nH=(100*nH)/nWP;
}else{nH=nMaxH;
nW=(100*nW)/nHP;
}}else{if(nW>=nMaxW){var nP=(100*nW)/nMaxW;
nH=(100*nH)/nP;
nW=nMaxW;
}else{if(nH>=nMaxH){var nP=(100*nH)/nMaxH;
nW=(100*nW)/nP;
nH=nMaxH;
}}}return{width:nW,height:nH};
});
nj.getPackage("changeProxyImage",function(sImageUrl,iSize){var exReg=/^http:\/\/.*.search.*.naver.jp/;
if(!sImageUrl||!sImageUrl.match(exReg)){return sImageUrl;
}var rSource={"300":"/r.300x600","160":"/r.160x140","120":"/r.120x120","100":"/r.100x100","95":"/c.95x95","80":"/c.80x80","66":"/c.65x65","60":"/c.60x60","51":"/c.51x51","50":"/c.50x50","18":"/c.18x18"};
var exPattern=/\/[a-z]{1}.[0-9]{1,3}x[0-9]{1,3}$/;
return sImageUrl.replace(exPattern,rSource[iSize])||sImageUrl;
});
nj.getPackage("filterUrl",function(sUrl){var aFilter=/^(http|https):\/\/([^\/]*\.)*(mainichi\.jp|ynawata\.asablo\.jp|housendo\.jp|www\.ne\.jp\/asahi\/korette\/hendenaikai|kinaishoku\.com|pby\.jp|tainan-guide\.com|sawadeechao\.net|plays\.jp\/bbs\/cnxbbs).*/;
return sUrl.match(aFilter);
});
nj.getPackage("curtail",function(sText,nSize){var oStr=nj.cutStr(sText,nSize,11,8,5,6);
if(oStr.str.length!=sText.length){return oStr.str+"...";
}return sText;
});
nj.getPackage("curtail2",function(sText,nSize){return nj.cutString(sText,nSize,"...");
});
nj.getPackage("onExternalLogin",function(sCookie,sRes){try{g_callback();
}catch(e){window.location.reload();
}});
nj.getPackage("nj.common.replaceLocationIfNullQuery",function(oElm){var frm=$(oElm);
var qt=$("#q",oElm);
var qu=$("#q_under",oElm);
var q=(qt.length>0)?qt:(qu.length>0)?qu:undefined;
if(q&&$.trim(q.val()).length<1){if(typeof getNullQueryReferencePage=="function"){location.href=getNullQueryReferencePage();
return false;
}}return true;
});
nj.getPackage("generateUniqueKey",function(self){var sTimeSeed=(new Date()).getTime().toString(16);
var sNumber=Math.random()+"";
var sRandomSeed=(sNumber.substring(2,sNumber.length)-0).toString(16);
return sTimeSeed+sRandomSeed;
});
nj.getPackage("fnMatome",(function(){return{be:function(target){return(typeof target=="undefined"?false:true);
},_exist:function(element){if(!this.be(element)||!this.be(element.value)){alert("not be element");
return false;
}return true;
},trim:function(sText,bFlag){if(sText){if(bFlag){var rtrim=/^[\f\n\r\t\v\u0020\u00a0\u2028\u2029\u3000]+|[\f\n\r\t\v\u0020\u00a0\u2028\u2029\u3000]+$/g;
return sText.replace(rtrim,"");
}else{return $.trim(sText);
}}else{return sText;
}},rtrim:function(sText){var rtrim=/[\f\n\r\t\v\u0020\u00a0\u2028\u2029\u3000]+$/g;
return sText.replace(rtrim,"");
},isBlank:function(sText){return this.trim(sText)==""?true:false;
},isNumeric:function(sText){sText=this.trim(sText);
var bIsNumber=true;
for(var i=0,len=sText.length;
i<len;
i++){var nCode=parseInt(sText.charCodeAt(i));
if(nCode<48||nCode>57){bIsNumber=false;
break;
}}return bIsNumber;
},validateBlank:function(element,oParam,bNotSelect){if(!this._exist(element)){return false;
}if(!this.isBlank(element.value)){return true;
}else{alert(oParam.msg);
if(!bNotSelect){element.focus();
}return false;
}},validateDefaultText:function(element,oParam,bNotSelect){if(!this._exist(element)){return false;
}if(this.trim(element.value)!=oParam.text){return true;
}else{alert(oParam.msg);
if(!bNotSelect){element.select();
}return false;
}},validateLength:function(element,oParam,bNotSelect){if(!this._exist(element)){return false;
}var sText=this.trim(element.value);
if(sText.length>=oParam.min&&sText.length<=oParam.max){return true;
}else{alert(oParam.msg);
if(!bNotSelect){element.select();
}return false;
}},validateNumeric:function(element,oParam,bNotSelect){if(!this._exist(element)){return false;
}if(this.isNumeric(element.value)){return true;
}else{alert(oParam.msg);
if(!bNotSelect){element.select();
}return false;
}},validate:function(element,oParam,bNotSelect){if(!this._exist(element)){return false;
}if(oParam.fn(element)){return true;
}else{alert(oParam.msg);
if(!bNotSelect){element.focus();
}return false;
}},clearText:function(element,oParams){if(this.trim(element.value)==oParams.text){element.value="";
}},addComma:function(nNum,nPositionOfPoint){var sNum=""+nNum;
nPositionOfPoint=nPositionOfPoint||3;
var sPre="",sPost="",nPos=-1;
nPos=sNum.indexOf(".");
if(nPos==-1){sPre=sNum;
}else{sPre=sNum.substr(0,nPos);
sPost=sNum.substr(nPos+1);
}var aStr=sPre.split("");
if(aStr.length<=nPositionOfPoint){return sPre+(sPost==""?"":"."+sPost);
}else{var aNewStr=[];
for(var i=aStr.length-1,j=1;
i>=0;
i--,j++){aNewStr.unshift(aStr[i]);
if(j%nPositionOfPoint==0&&i!=0){aNewStr.unshift(",");
}}return aNewStr.join("")+"."+sPost;
}},htmlEncode:function(str){return str.replace(/&lt;/ig,"<").replace(/&gt;/ig,">").replace(/&quot;/ig,'"').replace(/&amp;/ig,"&");
},validateURL:function(sURL){return/^(http|https):\/\/((\w|-)+(?:[\.:](\w|-))+)(?:\/|)?([^"\?]*?)(?:\?([^\?"]*?))?$/i.test(sURL);
},validateElementURL:function(el,oParam,bNotSelect){if(!fnMatome.validateURL(el.value)){alert(oParam.msg);
if(!bNotSelect){el.select();
}return false;
}return true;
},checkImageExtension:function(el,oParam,bNotSelect){if(!el.value.match(/\.(jpg|jpeg|gif|png)$/i)){alert(oParam.msg);
if(!bNotSelect){el.select();
}return false;
}return true;
}};
})("fnMatome"));
})(jQuery);
(function($){nj.getPackage("nj.matome.toTopButton",(function(OBJECT_NAME){var toTopButton=(function(toTopButton){var CONST={ALIGN:"RB"},SELECTOR={LIMIT_TOP:"DIV.LySub",LIMIT_LEFT:".lyContentsWrap",LIMIT_LEFT_SECOND:".lyWrapInner",LIMIT_BOTTOM:"DIV.LyFoot"},TEMPLATE=$.template(null,['<p class="MdToPageTop01">','<a class="mdToPageTop01Btn" href="#" data-na="NC:toTop">ページトップへ</a>',"</p>"].join(""));
toTopButton={appendTo:function($elParent,$oOptions){var $limitLeft=$(SELECTOR.LIMIT_LEFT),nLimitBottomPadding=25;
if(!$limitLeft.length){$limitLeft=$(SELECTOR.LIMIT_LEFT_SECOND);
nLimitBottomPadding=0;
}$oOptions=$.extend({},{element:null,align:CONST.ALIGN,limitTopElement:$(SELECTOR.LIMIT_TOP),limitTopPadding:20,limitLeftElement:$limitLeft,limitLeftPadding:20,limitRightElement:null,limitRightPadding:0,limitBottomElement:$(SELECTOR.LIMIT_BOTTOM),limitBottonPadding:nLimitBottomPadding,right:30,bottom:25,onUpdate:function($e){$e.documentScrollTop?$e.show():$e.hide();
}},$oOptions);
if(this._toTopButton){$oOptions&&this._toTopButton.init($oOptions);
}else{this.jqParent=$($elParent).length?$($elParent):document.body;
this.jqElement=($($oOptions.element).length?$($oOptions.element):$.tmpl(TEMPLATE).appendTo(this.jqParent)).click(function($e){try{$e.preventDefault();
$("html, body").animate({scrollTop:0},"fast");
}catch($e){}});
this._toTopButton=new PositionFixedElement(this.jqElement,$oOptions);
}return this._toTopButton;
}};
return toTopButton;
})({});
var PositionFixedElement=(function(PositionFixedElement){var CONST={POSITION:{L:"Left",R:"Right",T:"Top",B:"Bottom"},ALIGN:{HORIZONTAL:{LEFT:"L",RIGHT:"R"},VERTICAL:{TOP:"T",BOTTOM:"B"}}},DEFAULT={ALIGN:{HORIZONTAL:CONST.ALIGN.HORIZONTAL.RIGHT,VERTICAL:CONST.ALIGN.VERTICAL.BOTTOM}};
PositionFixedElement=function($elElement,$oOptions){if(!$($elElement).length){return false;
}this.jqElement=$($elElement).css("position","fixed");
this.jqWindow=$(window).resize($.proxy(this._updatePosition,this)).scroll($.proxy(this._updatePosition,this));
this.jqDocument=$(document);
this.nWidth=parseInt(this.jqElement.width(),10);
this.nHeight=parseInt(this.jqElement.height(),10);
this.init($oOptions);
};
PositionFixedElement.prototype={init:function($oOptions){$oOptions=$.extend({},{align:DEFAULT.ALIGN.HORIZONTAL+DEFAULT.ALIGN.VERTICAL,limitTopElement:null,limitTopPadding:0,limitLeftElement:null,limitLeftPadding:0,limitRightElement:null,limitRightPadding:0,limitBottomElement:null,limitBottonPadding:0,top:0,bottom:0,right:0,left:0,onUpdate:function(){}},$oOptions);
this.jqLimitTopElement=$($oOptions.limitTopElement).length?$($oOptions.limitTopElement):null;
this.jqLimitLeftElement=$($oOptions.limitLeftElement).length?$($oOptions.limitLeftElement):null;
this.jqLimitRightElement=$($oOptions.limitRightElement).length?$($oOptions.limitRightElement):null;
this.jqLimitBottomElement=$($oOptions.limitBottomElement).length?$($oOptions.limitBottomElement):null;
this.nLimitTopPadding=$oOptions.limitTopPadding;
this.nLimitLeftPadding=$oOptions.limitLeftPadding;
this.nLimitRightPadding=$oOptions.limitRightPadding;
this.nLimitBottomPadding=$oOptions.limitBottonPadding;
this.nTop=$oOptions.top;
this.nBottom=$oOptions.bottom;
this.nRight=$oOptions.right;
this.nLeft=$oOptions.left;
this.oInfo={};
this.fnOnUpdate=$oOptions.onUpdate;
this._setAlign($oOptions.align)._updatePosition();
},_setAlign:function($sAlign){var aAlignStrs=$sAlign.toUpperCase().split("").splice(0,2);
this._sAlignHorizontal=(function(){var nIndexOfAlignXLeft=$.inArray(CONST.ALIGN.HORIZONTAL.LEFT,aAlignStrs);
var nIndexOfAlignXRight=$.inArray(CONST.ALIGN.HORIZONTAL.RIGHT,aAlignStrs);
if(nIndexOfAlignXLeft>=0&&nIndexOfAlignXRight<0){return aAlignStrs[nIndexOfAlignXLeft];
}else{if(nIndexOfAlignXRight>=0&&nIndexOfAlignXLeft<0){return aAlignStrs[nIndexOfAlignXRight];
}else{if(nIndexOfAlignXLeft>=0&&nIndexOfAlignXRight>=0){return aAlignStrs[Math.max(nIndexOfAlignXLeft,nIndexOfAlignXRight)];
}else{return DEFAULT.ALIGN.HORIZONTAL;
}}}})();
this._sAlignVertical=(function(){var nIndexOfAlignYTop=$.inArray(CONST.ALIGN.VERTICAL.TOP,aAlignStrs);
var nIndexOfAlignYBottom=$.inArray(CONST.ALIGN.VERTICAL.BOTTOM,aAlignStrs);
if(nIndexOfAlignYTop>=0&&nIndexOfAlignYBottom<0){return aAlignStrs[nIndexOfAlignYTop];
}else{if(nIndexOfAlignYBottom>=0&&nIndexOfAlignYTop<0){return aAlignStrs[nIndexOfAlignYBottom];
}else{if(nIndexOfAlignYTop>=0&&nIndexOfAlignYBottom>=0){return aAlignStrs[Math.max(nIndexOfAlignYTop,nIndexOfAlignYBottom)];
}else{return DEFAULT.ALIGN.VERTICAL;
}}}})();
return this;
},_setVerticalInfo:function(){var nWindowHeight=parseInt(this.jqWindow.height(),10);
var nDocumentHeight=parseInt(this.jqDocument.height(),10);
var nDocumentScrollTop=parseInt(this.jqDocument.scrollTop(),10);
var nDocumentScrollBottom=nDocumentScrollTop+nWindowHeight;
var nLimitTop=parseInt(this.nLimitTopPadding+(this.jqLimitTopElement?(this.jqLimitTopElement.offset().top+this.jqLimitTopElement.height()):0),10);
var nLimitBottom=parseInt((this.jqLimitBottomElement?this.jqLimitBottomElement.offset().top:nDocumentHeight)-this.nLimitBottomPadding,10);
var oVerticalInfo=this.oInfo;
oVerticalInfo.windowHeight=nWindowHeight;
oVerticalInfo.documentHeight=nDocumentHeight;
oVerticalInfo.documentScrollTop=nDocumentScrollTop;
oVerticalInfo.documentScrollBottom=nDocumentScrollBottom;
oVerticalInfo.limitTop=nLimitTop;
oVerticalInfo.limitBottom=nLimitBottom;
return this;
},_getTop:function(){var oV=this.oInfo;
var nHeightFromLimitTop=oV.limitTop-oV.documentScrollTop-this.nTop;
var nHeightFromLimitBottom=oV.limitBottom-oV.documentScrollBottom+oV.windowHeight-this.nTop-this.nHeight;
var nTop=this.nTop+(nHeightFromLimitTop>0?nHeightFromLimitTop:0)+(nHeightFromLimitBottom<0?nHeightFromLimitBottom:0);
return nTop;
},_getBottom:function(){var oV=this.oInfo;
var nHeightFromLimitTop=oV.documentScrollBottom-oV.limitTop-this.nHeight-this.nBottom;
var nHeightFromLimitBottom=oV.documentScrollBottom-oV.limitBottom-this.nBottom;
var nBottom=this.nBottom+(nHeightFromLimitBottom>0?nHeightFromLimitBottom:0)+(nHeightFromLimitTop<0?nHeightFromLimitTop:0);
return nBottom;
},_setHorizontalInfo:function(){var nWindowWidth=parseInt(this.jqWindow.width(),10);
var nDocumentWidth=parseInt(this.jqDocument.width(),10);
var nDocumentScrollLeft=parseInt(this.jqDocument.scrollLeft(),10);
var nDocumentScrollRight=nDocumentScrollLeft+nWindowWidth;
var nLimitLeft=parseInt(this.nLimitLeftPadding+(this.jqLimitLeftElement?(this.jqLimitLeftElement.offset().left+this.jqLimitLeftElement.width()):0),10);
var nLimitRight=parseInt((this.jqLimitRightElement?this.jqLimitRightElement.offset().left:nDocumentWidth)-this.nLimitRightPadding,10);
var oHorizontalValue=this.oInfo;
oHorizontalValue.windowWidth=nWindowWidth;
oHorizontalValue.documentWidth=nDocumentWidth;
oHorizontalValue.documentScrollLeft=nDocumentScrollLeft;
oHorizontalValue.documentScrollRight=nDocumentScrollRight;
oHorizontalValue.limitLeft=nLimitLeft;
oHorizontalValue.limitRight=nLimitRight;
return this;
},_getLeft:function(){var oH=this.oInfo;
var nWidthFromLimitLeft=oH.limitLeft-oH.documentScrollLeft-this.nLeft;
var nWidthFromLimitRight=oH.limitRight-oH.documentScrollRight+oH.windowWidth-this.nLeft-this.nWidth;
var nLeft=this.nLeft+(nWidthFromLimitLeft>0?nWidthFromLimitLeft:0)+(nWidthFromLimitRight<0?nWidthFromLimitRight:0);
return nLeft;
},_getRight:function(){var oH=this.oInfo;
var nWidthFromLimitLeft=oH.documentScrollRight-oH.limitLeft-this.nWidth-this.nRight;
var nWidthFromLimitRight=oH.documentScrollRight-oH.limitRight-this.nRight;
var nRight=this.nRight+(nWidthFromLimitRight>0?nWidthFromLimitRight:0)+(nWidthFromLimitLeft<0?nWidthFromLimitLeft:0);
return nRight;
},_getPosition:function($sAlign){return this["_get"+CONST.POSITION[$sAlign]].apply(this,arguments);
},_getCSSKey:function($sAlign){return CONST.POSITION[$sAlign].toLowerCase();
},_visible:function($bVisible){if(!arguments.length){return(this._bVisible!==undefined)?this._bVisible:(this._bVisible=Boolean(this.jqElement.css("display")!="none"));
}else{if($bVisible){if(this._bVisible){return true;
}this.jqElement.show();
this._bVisible=true;
return this;
}else{if(!this._bVisible){return false;
}this.jqElement.hide();
this._bVisible=false;
return this;
}}},_updatePosition:function(){this._setVerticalInfo()._setHorizontalInfo();
var nPositionHorizontal=this._getPosition(this._sAlignHorizontal);
var nPositionVertical=this._getPosition(this._sAlignVertical);
if(nPositionHorizontal<-this.nWidth||nPositionVertical<-this.nHeight){this._visible()&&this._visible(false);
}else{!this._visible()&&this._visible(true);
var sCSSKeyX=this._getCSSKey(this._sAlignHorizontal);
var sCSSKeyY=this._getCSSKey(this._sAlignVertical);
this.jqElement.css(sCSSKeyX,nPositionHorizontal);
this.jqElement.css(sCSSKeyY,nPositionVertical);
var oEventValues={element:this.jqElement,windowWidth:this.oInfo.windowWidth,windowHeight:this.oInfo.windowHeight,documentWidth:this.oInfo.documentWidth,documentHeight:this.oInfo.documentHeight,documentScrollTop:this.oInfo.documentScrollTop,documentScrollBottom:this.oInfo.documentScrollBottom,documentScrollLeft:this.oInfo.documentScrollLeft,documentScrollRight:this.oInfo.documentScrollRight,limitTop:this.oInfo.limitTop,limitBottom:this.oInfo.limitBottom,limitLeft:this.oInfo.limitLeft,limitRight:this.oInfo.limitRight,show:$.proxy(function(){!this._visible()&&this._visible(true);
},this),hide:$.proxy(function(){this._visible()&&this._visible(false);
},this)};
oEventValues[sCSSKeyX]=nPositionHorizontal;
oEventValues[sCSSKeyY]=nPositionVertical;
this.fnOnUpdate.call(this,oEventValues);
}}};
return PositionFixedElement;
})(function(){});
return toTopButton;
})("nj.matome.toTopButton"));
})(jQuery);
(function($){var messages={LOCK_ERROR:"現在${name}さんが編集中のため、しばらく時間をおいてからアクセスしてください。",SERVICE_ERROR:"${service}と連携できませんでした。しばらく時間をおいて、再度試してください。",SERVER_ERROR:"一時的な問題により、アクセスできません。しばらくしてからもう一度お試しください。"},bGettingToken=false,OBSERVER_LABEL="njRest.getToken",njRest=function(method,options){var _errorLog=function(error){if(!options.triggerErrorHandler){return;
}var prefix="[jquery.njRest]";
(!!window.console&&(typeof(window.console.log)=="function"))&&console.log(prefix,error);
};
var _call=function(sType){var oajax={},option={url:options.url,type:sType,data:options.data,success:function(oRes){try{options.success&&options.success(oRes);
}catch(e){_errorLog(e);
}},error:function(jqXHR,textStatus,errorThrown){try{options.error&&options.error(jqXHR,textStatus,errorThrown);
}catch(e){_errorLog(e);
}},complete:function(o,s){try{options.complete&&options.complete(o,s);
}catch(e){_errorLog(e);
}}};
if(!isRestToken()){if(!bGettingToken){bGettingToken=true;
return _getToken(sType);
}else{$.njObserver(OBSERVER_LABEL,function(){var oa=_connect(option);
$.each(oa,function(i){oajax[i]=oa[i];
});
});
}return oajax;
}else{return _connect(option);
}};
var _connect=function(oCall){var oAjaxCall={url:oCall.url,type:oCall.type,cache:false,contentType:"application/json;charset=utf-8",data:oCall.data||"",dataType:"json",timeout:Number(options.timeout)||20000,beforeSend:function(jqXHR){if(typeof __REST_TOKEN__!="undefined"&&__REST_TOKEN__){jqXHR.setRequestHeader("Api-Token",__REST_TOKEN__);
}},success:function(oRes){var oData,sMessage,sService;
if(oRes&&oRes.error){if(oRes.error.code=="11400"){oData=$.parseJSON(oRes.error.msg)||{};
sMessage=messages.LOCK_ERROR.replace("${name}",oData.userNick||"");
}else{if(oRes.error.code=="17001"||oRes.error.code=="17002"){sService=oCall.url.indexOf("twitter")!==-1?"Twitter":"Facebook";
sMessage=messages.SERVICE_ERROR.replace("${service}",sService);
}}sMessage&&alert(sMessage);
}oCall.success(oRes);
},error:function(jqXHR,textStatus,errorThrown){if(options.triggerErrorHandler){try{oCall.error(jqXHR,textStatus,errorThrown);
}catch(e){}}else{if(jqXHR.status!=0){alert(messages.SERVER_ERROR);
}}},complete:function(o,s){try{oCall.complete&&oCall.complete(o,s);
}catch(e){}}};
return $.ajax(oAjaxCall);
};
var _getToken=function(sType){var url=options.API_TOKEN||"/api/apiToken",oajax={};
oajax=_connect({url:url+"?"+new Date().getTime(),type:"GET",success:function(oRes){var oa;
__REST_TOKEN__=oRes.apiToken;
if(!isRestToken()){bGettingToken=false;
}oa=_connect({url:options.url,type:sType,data:options.data,success:function(oRes){try{options.success(oRes);
}catch(e){_errorLog(e);
}},error:function(jqXHR,textStatus,errorThrown){try{options.error(jqXHR,textStatus,errorThrown);
}catch(e){_errorLog(e);
}},complete:function(jqXHR,textStatus){try{options.complete&&options.complete(jqXHR,textStatus);
}catch(e){_errorLog(e);
}}});
$.each(oa,function(i){oajax[i]=oa[i];
});
$.njObserver.notify(OBSERVER_LABEL);
},error:function(jqXHR,textStatus,errorThrown){bGettingToken=isRestToken();
try{$.njObserver.notify(OBSERVER_LABEL);
}catch(e){}}});
return oajax;
};
var methods={GET:function(oParam){return _call("GET",oParam);
},POST:function(oParam){return _call("POST",oParam);
},PUT:function(oParam){return _call("PUT",oParam);
},DELETE:function(oParam){return _call("DELETE",oParam);
}};
$.extend(methods,{read:methods.GET,create:methods.POST,update:methods.PUT,destroy:methods.DELETE});
return methods[method].apply(this,Array.prototype.slice.call(arguments,1));
};
function isRestToken(){return typeof __REST_TOKEN__!="undefined"&&__REST_TOKEN__;
}$.extend({rest:njRest});
})(jQuery);
(function($){nj.getPackage("nj.matome.mtmAPIRequester",(function(OBJECT_NAME){return{getLastCallbacks:function($oCallbacks,$oTarget){if((typeof $oCallbacks!=="function")&&(typeof $oCallbacks!=="object")&&($oCallbacks===undefined)){return null;
}$oTarget._nLastCallbackId=$.now();
var getCallback=function($fnCallback){var fnCallback=function(){if(fnCallback.id!=$oTarget._nLastCallbackId){return;
}$oTarget._nLastCallbackId=null;
delete $oTarget._nLastCallbackId;
if($fnCallback){$fnCallback.apply(null,arguments);
}};
fnCallback.id=$oTarget._nLastCallbackId;
return fnCallback;
};
if(typeof $oCallbacks=="function"){return getCallback($oCallbacks);
}else{if(typeof $oCallbacks=="object"){var oCallbacks=null;
for(var s in $oCallbacks){if(typeof $oCallbacks[s]=="function"){oCallbacks=oCallbacks||{};
oCallbacks[s]=getCallback($oCallbacks[s]);
}}return oCallbacks;
}else{return null;
}}},ajax:function($oOptions,$fnSuccess,$fnError,bParallel){var fnLastCallBacks,o={success:function($oResponse){$fnSuccess.apply(null,arguments);
},error:function(){$fnError.apply(null,arguments);
}};
if(!bParallel){fnLastCallBacks=this.getLastCallbacks(o,this);
}else{fnLastCallBacks=o;
}return $.ajax($.extend($oOptions,{success:fnLastCallBacks.success,error:fnLastCallBacks.error}));
},rest:function($sMethod,$oOptions,$fnSuccess,$fnError,bParallel){if(!$sMethod){return;
}var fnLastCallBacks,o={success:function($oResponse){$fnSuccess.apply(null,arguments);
},error:function(){$fnError.apply(null,arguments);
}};
if(!bParallel){fnLastCallBacks=this.getLastCallbacks(o,this);
}else{fnLastCallBacks=o;
}return $.rest($sMethod,$.extend($oOptions,{triggerErrorHandler:true,success:fnLastCallBacks.success,error:fnLastCallBacks.error}));
},request:function($oOptions,bParallel){$oOptions=$.extend(true,{requester:"",method:"",dataType:"",url:"",data:null,onSuccess:function(){},onError:function(){}},$oOptions);
var sRequester=$oOptions.requester.toLowerCase();
if(typeof this[sRequester]!=="function"){return;
}var sUrl=$oOptions.url;
var oData=$oOptions.data;
var fnSuccess=$oOptions.onSuccess;
var fnError=$oOptions.onError;
if(!sUrl){return;
}var oRequestOptions={url:sUrl,data:oData};
switch(sRequester){case"ajax":var sDataType=$oOptions.dataType.toLowerCase();
oRequestOptions.dataType=sDataType;
if($oOptions.dataType=="jsonp"&&$oOptions.jsonp){oRequestOptions.jsonp=$oOptions.jsonp;
}return this.ajax(oRequestOptions,fnSuccess,fnError,bParallel);
case"rest":var sMethod=$oOptions.method.toUpperCase();
oRequestOptions.data=oRequestOptions.data?(sMethod!="GET"?$.toJSON(oRequestOptions.data):oRequestOptions.data):null;
return this.rest(sMethod,oRequestOptions,fnSuccess,fnError,bParallel);
}}};
})("nj.matome.mtmAPIRequester"));
})(jQuery);
(function(){function RequestClient(){this._aQueue=[];
}RequestClient.prototype={request:function(o,bNotParallel){var $dfd=$.Deferred(),$promise,$ajax=nj.matome.mtmAPIRequester.request({requester:o.requester||"ajax",method:o.method?o.method.toUpperCase():"GET",url:o.url,data:o.data,dataType:o.dataType,jsonp:o.jsonp,onSuccess:function(o){if(!o||o.error){$dfd.reject(o?o.error:{});
}else{$dfd.resolve(o.result||o,o.resultCode);
}},onError:function(o){$dfd.reject(o);
}},!bNotParallel);
$promise=$dfd.promise();
$.extend($promise,{ajax:$ajax,abort:$ajax?$ajax.abort:null,success:function(f){return this.done(f);
},error:function(f){return this.fail(f);
}});
this._aQueue.push($ajax);
return $promise;
},abort:function(){var $ajax;
do{$ajax=this._aQueue.pop();
}while($ajax&&$ajax.abort&&$ajax.abort());
}};
nj.getPackage("nj.matome.common.RequestClient",RequestClient);
})();
var NStat={init:function(oParams,oOptions){if(this._bInited){return;
}this._bInited=true;
this._oOptions={server:"http://localhost:3000/cc",attr:"na"}; //http://cc.naver.jp/cc , I replace it with cc
this._oParams={v:"2.0"};
this._aTags=["NA","NC","NL","NI"];
if(oOptions){for(k in oOptions){this._oOptions[k]=oOptions[k];
}}if(oParams){for(k in oParams){this._oParams[k]=oParams[k];
}}this._sAttributeName="data-"+this._oOptions.attr;
this._oReqImgs=[];
this._attachEvent(window,"load",this._attachClickEvent,this);
},_attachClickEvent:function(){var sEvent="mousedown";
this._attachEvent(document,sEvent,this._nstatClickHandler,this);
},_nstatClickHandler:function(e){var oEvent=e||window.event;
var elTarget=oEvent.target||oEvent.srcElement;
if(oEvent.button==2){return;
}var oDefaultData=this._getDefaultData(oEvent);
this.send(elTarget,oDefaultData);
},send:function(el,sAct,oParam){if(sAct&&!oParam&&typeof sAct=="object"){oParam=sAct;
}var oData=this._getData(el,sAct,oParam);
if(oData){this._sendStat(oData);
}},_getData:function(el,sAct,oParam){var oData=this._findData(el);
if(!oData){return;
}var elTarget=oData.element;
if(!oData.root){var oAreaData=this._findUpperArea(elTarget);
if(oAreaData&&oAreaData.area){if(oData.area){oData.area=oAreaData.area+"/"+oData.area;
}else{oData.area=oAreaData.area;
}for(k in oAreaData.param){if(!oData.param[k]){oData.param[k]=oAreaData.param[k];
}}}else{oData.area="/"+oData.area;
}}if(sAct&&typeof sAct=="string"){oData.act=sAct;
}oData.param.a=oData.area;
oData.param.c=oData.act;
var oDefaultData=this._getDefaultData();
for(k in oDefaultData){if(!oData.param[k]){oData.param[k]=oDefaultData[k];
}}for(k in this._oParams){if(!oData.param[k]){oData.param[k]=this._oParams[k];
}}if(oParam&&typeof oParam=="object"){for(k in oParam){oData.param[k]=oParam[k];
}}return oData;
},_findData:function(el,elFrom){if(!el){return;
}if(el.nodeType==3){el=el.parentNode;
}if(el.tagName&&el.tagName.toLowerCase()=="body"){return;
}var oData=this._getNStatData(el);
if(!oData){if(el.parentNode){oData=this._findData(el.parentNode,el);
}}else{oData.element=el;
}return oData;
},_findUpperArea:function(el){var oData={};
oData.param={};
var p=el;
while(p=p.parentNode){if(p.tagName&&p.tagName.toLowerCase()=="body"){break;
}var oNodeData=this._getNStatData(p);
if(!oNodeData){continue;
}if(oNodeData.tag=="NA"){if(oNodeData.area){if(oData.area){oData.area="/"+oNodeData.area+oData.area;
}else{oData.area="/"+oNodeData.area;
}oData.area=oData.area.replace(/\/\//g,"/");
}for(k in oNodeData.param){if(!oData.param[k]){oData.param[k]=oNodeData.param[k];
}}if(oNodeData.root){break;
}}}return oData;
},_getNStatData:function(el){var elPrev=el.previousSibling||null;
if(elPrev&&elPrev.nodeType==3){elPrev=elPrev.previousSibling||null;
}if(el.tagName&&el.tagName.toLowerCase()=="li"&&elPrev&&elPrev.tagName&&elPrev.tagName.toLowerCase()=="li"){elPrev=elPrev.lastChild;
}var oData;
if(elPrev&&elPrev.nodeType==8){oData=this._getNStatCommentData(elPrev);
if(oData){oData.source="comment";
}}if(!oData){oData=this._getNStatAttrData(el);
if(oData){oData.source="attribute";
}}return oData;
},_getNStatAttrData:function(el){var sAttr=this._attr(el,this._sAttributeName);
if(sAttr){return this._parseData(sAttr);
}},_getNStatCommentData:function(elComment){return this._parseData(elComment.data);
},_parseData:function(sData){var aData=sData.replace(/(^\s+|\s+$)/g,"").split("=");
var oTagId=aData[0].split(":");
var sTagId=oTagId[0].toUpperCase();
var sId=oTagId[1]||"";
var sArea="";
var bRoot=false;
if(this._aTags.join(",").indexOf(sTagId)==-1){return;
}if(sId.charAt(0)=="/"){if(sId.lastIndexOf(".")>-1){sArea=sId.substr(0,sId.lastIndexOf("."));
sId=sId.substr(sId.lastIndexOf(".")+1);
}bRoot=true;
}if(sTagId=="NA"){sArea=sId;
sId="";
}var oData={tag:sTagId,act:sId,area:sArea,root:bRoot,raw:sData,param:{}};
switch(oData.tag){case"NL":case"NC":oData.param.b="n";
}if(aData.length==2){var aParam=aData[1].split(",");
for(var i=0;
i<aParam.length;
i++){var aItem=aParam[i].split(":");
if(aItem.length==2){oData.param[aItem[0]]=aItem[1];
}}}return oData;
},_getDefaultData:function(e){var oData={};
var isWebkit=navigator.userAgent.indexOf("WebKit")>-1;
var sDocKey=this._renderingMode()=="Standards"?"documentElement":"body";
var oDoc=document[isWebkit?"body":sDocKey];
oData.w=Math.max(oDoc.scrollWidth,oDoc.clientWidth);
if(e){var oPos=this._getPosition(e);
oData.px=oPos.pageX;
oData.py=oPos.pageY;
oData.sx=oPos.clientX;
oData.sy=oPos.clientY;
}oData.time=(new Date()).getTime();
return oData;
},_sendStat:function(oData){var sQuery=this._toQueryString(oData.param);
var sUrl=this._oOptions.server+"?"+sQuery;
switch(oData.tag){case"NI":return;
case"NL":var element=oData.element;
var sAnchorUrl=element.href;
sUrl+="&u="+encodeURIComponent(sAnchorUrl);
case"NC":var oImg=new Image();
this._oReqImgs.push(oImg);
oImg.src=sUrl;
}},_toQueryString:function(oData){var buf=[],val=null,idx=0;
for(var k in oData){if(typeof(val=oData[k])=="object"&&val.constructor==Array){for(i=0;
i<val.length;
i++){buf[buf.length]=encodeURIComponent(k)+"[]="+encodeURIComponent(val[i]+"");
}}else{buf[buf.length]=encodeURIComponent(k)+"="+encodeURIComponent(oData[k]+"");
}}return buf.join("&");
},_bind:function(func,obj){var a=arguments;
var b=function(e){var args=[];
for(var i=0;
i<arguments.length;
i++){args[args.length]=arguments[i];
}if(typeof e=="undefined"){e=window.event;
}if(typeof e.currentTarget=="undefined"){e.currentTarget=null;
}args.unshift(e);
var returnValue=func.apply(obj,args);
return returnValue;
};
return b;
},_renderingMode:function(){var isIe=(typeof window.opera=="undefined"&&navigator.userAgent.indexOf("MSIE")>-1);
var isSafari=(navigator.userAgent.indexOf("WebKit")>-1&&navigator.userAgent.indexOf("Chrome")<0&&navigator.vendor.indexOf("Apple")>-1);
var sRet;
if("compatMode" in document){sRet=document.compatMode=="CSS1Compat"?"Standards":(isIe?"Quirks":"Almost");
}else{sRet=isSafari?"Standards":"Quirks";
}return sRet;
},_getPosition:function(e){var elTarget=e.target||e.srcElement;
var b=(elTarget.ownerDocument||document).body;
var de=(elTarget.ownerDocument||document).documentElement;
var pos=[b.scrollLeft||de.scrollLeft,b.scrollTop||de.scrollTop];
var ret={clientX:e.clientX,clientY:e.clientY,pageX:"pageX" in e?e.pageX:e.clientX+pos[0]-b.clientLeft,pageY:"pageY" in e?e.pageY:e.clientY+pos[1]-b.clientTop};
return ret;
},_attr:function(e,sName){if(sName=="class"||sName=="className"){return e.className;
}if(e.getAttribute){return e.getAttribute(sName);
}},_attachEvent:function(sTarget,sEvent,fnHandler,oThis){if(sTarget.addEventListener){sTarget.addEventListener(sEvent,this._bind(fnHandler,oThis),false);
}else{if(sTarget.attachEvent){sTarget.attachEvent("on"+sEvent,this._bind(fnHandler,oThis));
}}}};
var nclkVersion="0.9.3";
var nclkDetect=navigator.userAgent.toLowerCase();
var nclkIsSafari=(nclkDetect.indexOf("safari")!=-1?true:false);
var nclkIsIE=(window.attachEvent&&!window.opera?true:false);
if(!nclkMaxDepth){var nclkMaxDepth=10;
}if(!nclkMaxEvtTarget){var nclkMaxEvtTarget=4;
}if(!nclkServer){var nclkServer=""; //todo  "cc.naver.jp"
}var nclkModule="cc";
if(!nclk_evt){var nclk_evt=1;
}if(!nclk_nsc){var nclk_nsc="decide.me";
}if(!g_pid){var g_pid="";
}if(!g_sid){var g_sid="";
}var nclkImg=[];
var fEnableNclk=false;
function nclkAddEvent(obj,type,fn){if(obj.addEventListener){obj.addEventListener(type,fn,false);
}else{if(obj.attachEvent){obj.attachEvent("on"+type,fn);
}}}function nclk_do(){if(nclk_evt==1||nclk_evt==2){nclkAddEvent(document,"click",nclkGenerateCC);
}fEnableNclk=true;
}function nclkGenerateCC(e){var evt=e||window.event;
var evtTarget;
var evtTarget=evt.target||evt.srcElement;
var evtNodeName=evtTarget.nodeName;
var realTarget,blankTarget,firstTarget;
var arrStr,arrPos;
var w,mode,area;
var checkVal;
var nextObj;
var goUpDepth=-1;
mode=0;
if(evt.button==2){return;
}if(evtTarget.nodeType==3){evtTarget=evtTarget.parentNode;
}if(evtTarget.parentNode&&evtTarget.parentNode.nodeName=="A"){evtTarget=evtTarget.parentNode;
}firstTarget=evtTarget;
while(goUpDepth<=nclkMaxEvtTarget){if(goUpDepth>=nclkMaxEvtTarget){if(nclk_evt==2){checkVal=0;
realTarget=firstTarget;
break;
}else{return;
}}else{checkVal=nclkCheckHeader(evtTarget);
if(checkVal==0){if(evtTarget.parentNode){evtTarget=evtTarget.parentNode;
goUpDepth++;
}else{checkVal=0;
realTarget=firstTarget;
break;
}}else{realTarget=evtTarget;
break;
}}}switch(checkVal){case 0:case 1:case 2:case 3:if(nclk_evt==2){mode=nclkCheckMode(realTarget);
clink=nclkMakeRequestStr(realTarget,evt,mode,"ncs.blank","","");
}else{return;
}break;
case 4:mode=nclkCheckMode(realTarget);
area=nclkFindArea(realTarget,1);
if(area==undefined){area="";
}nextObj=nclkSearchNextObj(realTarget);
if(nextObj){arrStr=nclkParseNCStr(checkVal,nextObj.data);
}else{arrStr=false;
}if(!arrStr){arrStr=new Array();
arrStr[0]="";
arrStr[1]="";
arrStr[2]="";
arrStr[3]="";
arrStr[5]=false;
}else{if(arrStr[4]=="0"){mode=0;
}else{if(arrStr[4]=="1"){mode=1;
}}}area=(arrStr[5]?area+"*"+arrStr[0]:area+"."+arrStr[0]);
clink=nclkMakeRequestStr(realTarget,evt,mode,area,arrStr[1],arrStr[2],arrStr[3]);
break;
case 5:mode=nclkCheckMode(realTarget);
area=nclkFindArea(realTarget,2);
if(area==undefined){area="";
}nextObj=nclkSearchNextObj(realTarget);
if(nextObj){arrStr=nclkParseNCStr(checkVal,nextObj.data);
}else{arrStr=false;
}if(!arrStr){arrStr[0]="";
arrStr[1]="";
arrStr[2]="";
arrStr[3]="";
}else{if(arrStr[4]=="0"){mode=0;
}else{if(arrStr[4]=="1"){mode=1;
}}}clink=nclkMakeRequestStr(realTarget,evt,mode,area,arrStr[1],arrStr[2],arrStr[3]);
break;
case 6:mode=nclkCheckMode(realTarget);
nextObj=nclkSearchNextObj(realTarget);
if(nextObj){arrStr=nclkParseNCStr(checkVal,nextObj.data);
}else{arrStr=false;
}if(!arrStr){arrStr[0]="";
arrStr[1]="";
arrStr[2]="";
arrStr[3]="";
}else{if(arrStr[4]=="0"){mode=0;
}else{if(arrStr[4]=="1"){mode=1;
}}}clink=nclkMakeRequestStr(realTarget,evt,mode,arrStr[0],arrStr[1],arrStr[2],arrStr[3]);
break;
default:return;
}nclkSendToCC(realTarget,mode,clink);
}function nclkSearchNextObj(realTarget){var nextObj=realTarget.nextSibling;
if(nextObj.nodeType==3){nextObj=nextObj.nextSibling;
}return nextObj;
}function nclkCheckHeader(obj){var headerType=0;
if(!obj){return 0;
}var nextObj=obj.nextSibling;
var arrStr;
var firstChar;
var restStr;
if(nextObj){if(nextObj.nodeType==3){nextObj=nextObj.nextSibling;
}if(nextObj!=null&&nextObj.nodeType==8&&nextObj.data.indexOf("=")>0){arrStr=nclkTrim(nextObj.data).split("=");
firstChar=arrStr[0].charAt(0);
restStr=arrStr[0].substring(1);
if(firstChar!="N"){return 0;
}if(restStr=="E"){headerType=1;
}else{if(restStr=="I"){headerType=2;
}else{if(restStr=="EI"||restStr=="IE"){headerType=3;
}else{if(restStr=="IP"||restStr=="PI"){headerType=4;
}else{if(restStr=="P"){headerType=5;
}else{if(arrStr[0].length==1){headerType=6;
}else{headerType=0;
}}}}}}}else{headerType=0;
}}else{headerType=0;
}return headerType;
}function nclkFindArea(obj,areaRange){var depth=0;
var p=obj;
var slb;
var data;
var arrStr,arrArea;
var area="";
var prevFinish=0;
var returnVal;
var headerKey;
if(!p){return;
}if(areaRange==1){prevFinish=1;
}else{if(areaRange==2){prevFinish=0;
}}while(p=p.parentNode){slb=p;
while(slb=slb.previousSibling){if(slb.nodeType==8){data=nclkTrim(slb.data);
if(data.indexOf("=")>0){arrStr=data.split("=");
if(arrStr[0].charAt(0)!="N"){continue;
}headerKey=arrStr[0].substring(1);
if(headerKey=="I"&&prevFinish==0){arrArea=arrStr[1].split(":");
if(arrArea[0]=="a"){area=arrArea[1];
}prevFinish++;
break;
}else{if(headerKey=="E"&&prevFinish==1){if(prevFinish==1){arrArea=arrStr[1].split(":");
if(arrArea[0]=="a"){if(area==""){area=arrArea[1];
}else{area=arrArea[1]+"."+area;
}}}prevFinish++;
break;
}else{if((headerKey=="EI"||headerKey=="IE")&&prevFinish==0){arrArea=arrStr[1].split(":");
if(arrArea[0]=="a"){area=arrArea[1];
}prevFinish+=2;
break;
}}}}}}depth++;
if(prevFinish>=2){returnVal=area;
break;
}if(depth>=nclkMaxDepth){returnVal=false;
break;
}}return returnVal;
}function getServiceType(){var serviceType;
if(window.g_ssc!=undefined&&window.g_query!=undefined){serviceType=1;
}else{serviceType=0;
}return serviceType;
}function nclkDirectRequest(obj,evt,area,code,rank){try{if(!fEnableNclk){return;
}var mode=0;
var _area=area;
if(code&&code.length>0){_area=area+"."+code;
}var clink=nclkMakeRequestStr(obj,evt,mode,_area,rank,"","");
if(clink){nclkSendToCC(obj,mode,clink);
}}catch(e){}}function nclkMakeRequestStr(obj,evt,mode,area,rank,gdid,sign){var clink="";
var tempURL="";
var arrPos=nclkGetCoord(obj,evt);
var w,mode;
var serviceType=getServiceType();
w=nclkXWindowSize(window);
if(obj.href&&obj.href.indexOf("http://"+nclkServer)==0){tempURL=obj.href;
}else{tempURL="http://"+nclkServer+"/"+nclkModule+"?";
tempURL+="a="+area+"&r="+rank+"&i="+gdid;
tempURL+="&w="+w+"&px="+arrPos[0]+"&py="+arrPos[1];
tempURL+="&sx="+arrPos[2]+"&sy="+arrPos[3]+"&m="+mode;
if(serviceType==0){tempURL+="&nsc="+nclk_nsc;
}else{if(serviceType==1){tempURL+="&ssc="+g_ssc+"&q="+encodeURIComponent(g_query)+"&s="+g_sid+"&p="+g_pid;
if(sign){tempURL+="&g="+sign;
}}else{return"";
}}}if(obj.href&&obj.href.indexOf("http://"+nclkServer)==0){clink=tempURL;
}else{if(obj.href&&obj.href.indexOf("http://"+nclkServer)!=0&&obj.nodeName.toLowerCase()!="img"){try{var h=obj.href;
if(obj.outerHTML&&!window.XMLHttpRequest){var l=location;
h=(/\shref=\"([^\"]+)\"/i.test(obj.outerHTML)&&RegExp.$1).replace(/\\/g,"\\\\").replace(/%([A-Z0-9]{2})/ig,"\\$1");
(d=document.createElement("div")).innerHTML=h;
h=d.innerText.replace(/\\([A-Z0-9]{2})/gi,"%$1").replace(/\\\\/g,"\\");
if(!/^https?:\/\//i.test(h)){h=l.protocol+"//"+l.host+(/^\//.test(h)?"":"/")+h;
}h=h.replace(/\/\.\//g,"/");
}clink=tempURL+"&u="+encodeURIComponent(h);
}catch(e){clink=tempURL+"&u="+encodeURIComponent(obj.href);
}}else{clink=tempURL+"&u=about%3Ablank";
}}return clink;
}function nclkCheckMode(obj){if(obj.href){if((obj.target&&obj.target!="_self"&&obj.target!="_top"&&obj.target!="_parent")||(obj.href.toLowerCase().indexOf("javascript:")!=-1)||(obj.getAttribute("href",2)&&obj.getAttribute("href",2).charAt(0)=="#")||(obj.href.indexOf("#")!=-1&&(obj.href.substr(0,obj.href.indexOf("#"))==document.URL))||obj.nodeName.toLowerCase()=="img"||nclkIsSafari||nclkIsIE){mode=0;
}else{mode=1;
}}else{mode=0;
}return mode;
}function nclkSendToCC(obj,mode,clink){var temp;
if(mode==1){temp=obj.innerHTML;
obj.href=clink;
if(obj.innerHTML!=temp){obj.innerHTML=temp;
}}else{if(document.images){var timestr=new Date().getTime();
clink+="&time="+timestr;
if(nclkIsSafari&&!obj.href){var b=c=new Date();
while((b.getTime()-c.getTime())<100){b=new Date();
}var o=new Image();
nclkImg.push(o);
o.src=clink;
}else{var o=new Image();
nclkImg.push(o);
o.src=clink;
}}}}function nclkGetCoord(obj,theEvent){var px=py=sx=sy=-1;
var ifrId=nclkCheckIframe(obj);
if(ifrId){var ifrOffset=nclkFindPos(document.getElementById(ifrId));
if(theEvent.clientX&&theEvent.clientX!=undefined){dBody=document.body;
if(dBody.clientLeft&&dBody.clientTop){ifrSx=theEvent.clientX-dBody.clientLeft;
ifrSy=theEvent.clientY-dBody.clientTop;
}else{ifrSx=theEvent.clientX;
ifrSy=theEvent.clientY;
}}px=ifrOffset[0]+ifrSx;
py=ifrOffset[1]+ifrSy;
if(document.body&&(document.body.scrollTop||document.body.scrollLeft)){dBody=document.body;
sx=px-dBody.scrollLeft;
sy=py-dBody.scrollTop;
}else{if(document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)){dElement=document.documentElement;
sx=px-dElement.scrollLeft;
sy=py-dElement.scrollTop;
}else{sx=px;
sy=py;
}}}else{if(theEvent.clientX&&theEvent.clientX!=undefined){dBody=document.body;
if(dBody.clientLeft&&dBody.clientTop){sx=theEvent.clientX-dBody.clientLeft;
sy=theEvent.clientY-dBody.clientTop;
}else{sx=theEvent.clientX;
sy=theEvent.clientY;
}}if(document.body&&(document.body.scrollTop||document.body.scrollLeft)){px=document.body.scrollLeft+(sx<0?0:sx);
py=document.body.scrollTop+(sy<0?0:sy);
}else{if(document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)){dElement=document.documentElement;
if(dElement.scrollLeft!=undefined){px=dElement.scrollLeft+(sx<0?0:sx);
}if(dElement.scrollTop!=undefined){py=dElement.scrollTop+(sy<0?0:sy);
}}else{px=(sx<0?0:sx);
py=(sy<0?0:sy);
}}if(theEvent.pageX){px=theEvent.pageX;
}if(theEvent.pageY){py=theEvent.pageY;
}}return[px,py,sx,sy];
}function nclkParseNCStr(headerType,str){str=nclkTrim(str);
var sp;
var body;
var argArr;
var retVal;
var area="",rank="",gdid="",sign="",mode,bSsupport=false;
var areaPos=2;
switch(headerType){case 4:areaPos=4;
break;
case 5:areaPos=3;
break;
case 6:areaPos=2;
break;
case 1:case 2:case 3:default:return;
}body=str.substring(areaPos);
argArr=body.split(",");
for(var i=0;
i<argArr.length;
i++){retVal=argArr[i].split(":");
if(retVal[0]=="a"){area=retVal[1];
}else{if(retVal[0]=="r"){rank=retVal[1];
}else{if(retVal[0]=="i"){gdid=retVal[1];
}else{if(retVal[0]=="g"){sign=retVal[1];
}else{if(retVal[0]=="m"){mode=retVal[1];
}else{if(retVal[0]=="s"&&retVal[1]){area=retVal[1]+"."+area;
bSsupport=true;
}}}}}}}return[area,rank,gdid,sign,mode,bSsupport];
}function nclkTrim(str){return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"");
}function nclkGetScrollBarWidth(){var inner=document.createElement("p");
inner.style.width="200px";
inner.style.height="200px";
var outer=document.createElement("div");
outer.style.position="absolute";
outer.style.top="0px";
outer.style.left="0px";
outer.style.visibility="hidden";
outer.style.width="200px";
outer.style.height="150px";
outer.style.overflow="hidden";
outer.appendChild(inner);
document.body.appendChild(outer);
var w1=inner.offsetWidth;
outer.style.overflow="scroll";
var w2=inner.offsetWidth;
if(w1==w2){w2=outer.clientWidth;
}document.body.removeChild(outer);
return(w1-w2);
}function nclkFindPos(obj){var curleft=curtop=0;
try{if(obj.offsetParent){do{curleft+=obj.offsetLeft;
curtop+=obj.offsetTop;
}while(obj=obj.offsetParent);
}else{if(obj.x||obj.y){if(obj.x){curleft+=obj.x;
}if(obj.y){curtop+=obj.y;
}}}}catch(e){}return[curleft,curtop];
}function nclkXWindowSize(win){if(!win){win=window;
}var winWidth=0;
if(win.innerWidth){winWidth=win.innerWidth;
if(typeof(win.innerWidth)=="number"){var scrollbarWidth=nclkGetScrollBarWidth();
winWidth=win.innerWidth-scrollbarWidth;
}}else{if(document.documentElement&&document.documentElement.clientWidth){winWidth=document.documentElement.clientWidth;
}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){winWidth=document.body.clientWidth;
}}}return winWidth;
}function nclkCheckIframe(obj){var oriURL=document.URL;
var p=obj.parentNode;
var docObj;
var ifrId;
while(p&&1){if(p.nodeName.toLowerCase()=="#document"){if(p.parentWindow){docObj=p.parentWindow;
}else{docObj=p.defaultView;
}try{if(docObj.frameElement!=null&&docObj.frameElement!=undefined){if(docObj.frameElement.nodeName.toLowerCase()=="iframe"){ifrId=docObj.frameElement.id;
if(!ifrId){return false;
}return ifrId;
}else{return false;
}}else{return false;
}}catch(e){return false;
}}else{p=p.parentNode;
if(p==null||p==undefined){return false;
}}}}function nclkAppendCommnetNode(el,attr,code,rank){if(!el){return;
}var rawNode;
if(el instanceof $Element){rawNode=el.$value();
}else{if(el instanceof String){rawNode=$(el);
}else{rawNode=el;
}}var comNode=nclkCreateCommnetNode(attr,code,rank);
if(!comNode){return;
}nclkInsertAfter(comNode,rawNode);
}function nclkCreateCommnetNode(attr,code,rank,serviceCode,id){if(!code){return;
}if(serviceCode){code=serviceCode+"."+code;
}var text=attr+"=a:"+code;
if(rank&&rank!=""){text+=",r:"+rank;
}if(id&&id!=""){text+=",i:"+id;
}return document.createComment(text);
}function nclkInsertAfter(newElement,targetElement){var parent=targetElement.parentNode;
if(parent.lastChild==targetElement){parent.appendChild(newElement);
}else{if(targetElement.nextSibling&&targetElement.nextSibling.nodeType==8){nclkInsertAfter(newElement,targetElement.nextSibling);
}else{parent.insertBefore(newElement,targetElement.nextSibling);
}}}function nclkChangeCode(elTarget,sNewcode,fBackward){try{var nClickTag;
if(elTarget.nodeType==8){nClickTag=elTarget;
}else{nClickTag=elTarget.nextSibling;
}if(nClickTag&&nClickTag.nodeType==8){var value=nclkTrim(nClickTag.nodeValue);
nClickTag.nodeValue=value.replace(/^NE|NIP|NPI=a:([0-9a-zA-Z]+),{0,1}r{0,1}.*$/g,function(a,b){return a.replace(b,sNewcode);
});
}}catch(e){}}function nclkChangeRank(elTarget,sNewRank){try{var nClickTag=elTarget.nextSibling;
if(nClickTag.nodeType==8){var value=nclkTrim(nClickTag.nodeValue);
nClickTag.nodeValue=value.replace(/^NE|NIP|NPI=a:[0-9a-zA-Z]+,r:([0-9]*).*$/,function(a,b){return a.replace(b,sNewRank);
});
}}catch(e){}}function nclkGetArea(obj){if(!obj){return;
}if(typeof(obj)=="string"){obj=document.getElementById(obj);
}try{var o=nclkFindAreaNode(obj);
if(!o){return;
}var nClickTag;
if(o.nodeType==8){nClickTag=o;
}else{nClickTag=o.nextSibling;
}if(nClickTag.nodeType==8){var value=nclkTrim(nClickTag.nodeValue);
value.match(/^NE=a:([0-9a-zA-Z_]+)*$/g);
return RegExp.$1;
}}catch(e){}}function nclkReplaceArea(obj,sNewArea){try{var o=nclkFindAreaNode(obj);
if(!o){return;
}var nClickTag;
if(o.nodeType==8){nClickTag=o;
}else{nClickTag=o.nextSibling;
}if(nClickTag.nodeType==8){var value=nclkTrim(nClickTag.nodeValue);
nClickTag.nodeValue=value.replace(/^NE=a:([0-9a-zA-Z_]+)*$/g,function(a,b){return a.replace(b,sNewArea);
});
}}catch(e){}}function nclkFindAreaNode(obj){var depth=0;
var p=obj;
var slb;
if(!p){return;
}if(p&&p.nextSibling&&p.nextSibling.nodeType==8&&nclkTrim(p.nextSibling.nodeValue).match(/^NE=a:([0-9a-zA-Z]+)/g)){return p;
}try{while(p=p.parentNode){slb=p;
while(slb=slb.previousSibling){if(slb.nodeType==8){if(nclkTrim(slb.nodeValue).match(/^NE=a:([0-9a-zA-Z]+)/g)){return slb;
}}}depth++;
if(depth>=nclkMaxDepth){break;
}}}catch(e){}return null;
}function nclkReplaceComment(elTarget,sOld,sNew){try{var nClickTag=elTarget.nextSibling;
if(nClickTag.nodeType==8){var value=nClickTag.nodeValue;
nClickTag.nodeValue=value.replace(sOld,sNew);
}}catch(e){}}var lcs_isie=(navigator.appName=="Microsoft Internet Explorer");
var lcs_isns=(navigator.appName=="Netscape");
var lcs_isopera=(navigator.appVersion.indexOf("Opera")>=0);
var lcs_ismac=(navigator.userAgent.indexOf("MAC")>=0);
var lcs_add={};
var lcs_bc={};
var lcs_ver="v0.4.11";
var lcs_count=0;
lcs_obj=[];
function lcs_do(etc){if(!lcs_SerName){var lcs_SerName="lcs.naver.jp";
}var rs="";
var index;
try{var lcs_Addr=(window.location.protocol?window.location.protocol:"http:")+"//"+lcs_SerName+"/m?";
}catch(e){return;
}try{rs=lcs_Addr+"u="+encodeURIComponent(document.URL)+"&e="+(document.referrer?encodeURIComponent(document.referrer):"");
}catch(e){}try{if(typeof lcs_add.i=="undefined"){lcs_add.i="";
}for(var index in lcs_add){if(typeof lcs_add[index]!="function"){rs+="&"+index+"="+encodeURIComponent(lcs_add[index]);
}}for(var index in etc){if((index.length>=3&&(typeof etc[index]!="function"))||index=="qy"){rs+="&"+index+"="+encodeURIComponent(etc[index]);
}}lcs_getBrowserCapa();
for(var index in lcs_bc){if(typeof lcs_bc[index]!="function"){rs+="&"+index+"="+encodeURIComponent(lcs_bc[index]);
}}if(lcs_count>0){var timeStr=(new Date).getTime();
rs+="&ts="+timeStr;
}rs+="&EOU";
if(document.images){var obj=(new Image());
lcs_obj.push(obj);
obj.src=rs;
}else{document.write('<img src="'+rs+'" width="1" height="1" border="0" />');
}lcs_count++;
}catch(e){return;
}}function lcs_do_gdid(gdid,etc){try{if(gdid){lcs_add.i=gdid;
if(etc){lcs_do(etc);
}else{lcs_do();
}}}catch(e){}}function lcs_getBrowserCapa(){lcs_getOS();
lcs_getlanguage();
lcs_getScreen();
lcs_getWindowSize();
lcs_getColorDepth();
lcs_getJavaEnabled();
lcs_getJavascriptVer();
lcs_getCookieEnabled();
lcs_getSwfVer();
lcs_getSLVersion();
lcs_getConnectType();
lcs_getPlugIn();
}function lcs_getOS(){var lcs_os="";
try{(navigator.platform?lcs_os=navigator.platform:"");
}catch(e){}lcs_bc.os=lcs_os;
}function lcs_getlanguage(){var lcs_ln="";
try{(navigator.userLanguage?lcs_ln=navigator.userLanguage:(navigator.language)?lcs_ln=navigator.language:"");
}catch(e){}lcs_bc.ln=lcs_ln;
}function lcs_getScreen(){var lcs_sr="";
try{if(window.screen&&screen.width&&screen.height){lcs_sr=screen.width+"x"+screen.height;
}else{if(window.java||self.java){var sr=java.awt.Toolkit.getDefaultToolkit().getScreenSize();
lcs_sr=sr.width+"x"+sr.height;
}}}catch(e){lcs_sr="";
}lcs_bc.sr=lcs_sr;
}function lcs_getWindowSize(){lcs_bc.bw="";
lcs_bc.bh="";
try{lcs_bc.bw=document.documentElement.clientWidth?document.documentElement.clientWidth:document.body.clientWidth;
lcs_bc.bh=document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight;
}catch(e){}}function lcs_getColorDepth(){lcs_bc.c="";
try{if(window.screen){lcs_bc.c=screen.colorDepth?screen.colorDepth:screen.pixelDepth;
}else{if(window.java||self.java){var c=java.awt.Toolkit.getDefaultToolkit().getColorModel().getPixelSize();
lcs_bc.c=c;
}}}catch(e){lcs_bc.c="";
}}function lcs_getJavaEnabled(){lcs_bc.j="";
try{lcs_bc.j=navigator.javaEnabled()?"Y":"N";
}catch(e){}}function lcs_getCookieEnabled(){lcs_bc.k="";
try{lcs_bc.k=navigator.cookieEnabled?"Y":"N";
}catch(e){}}function lcs_getConnectType(){var lcs_ct="";
try{if(lcs_isie&&!lcs_ismac&&document.body){var obj=document.body.addBehavior("#default#clientCaps");
lcs_ct=document.body.connectionType;
document.body.removeBehavior(obj);
}}catch(e){}lcs_bc.ct=lcs_ct;
}function lcs_getJavascriptVer(){var j="1.0";
try{if(String&&String.prototype){j="1.1";
if(j.search){j="1.2";
var dt=new Date,no=0;
if(dt.getUTCDate){j="1.3";
var i,ie=navigator.appVersion.indexOf("MSIE");
if(ie>0){var apv=parseInt(i=navigator.appVersion.substring(ie+5));
if(apv>3){n_apv=parseFloat(i);
}}if(lcs_isie&&lcs_ismac&&apv>=5){j="1.4";
}if(no.toFixed){j="1.5";
var a=new Array;
if(a.every){j="1.6";
i=0;
var obj=new Object;
var test=function(obj){var i=0;
try{i=new Iterator(obj);
}catch(e){}return i;
};
i=test(obj);
if(i&&i.next){j="1.7";
}if(a.reduce){j="1.8";
}}}}}}}catch(e){}lcs_bc.jv=j;
}function lcs_getSwfVer(){var flashVer="";
var isWin=false;
try{isWin=(navigator.appVersion.toLowerCase().indexOf("win")!=-1)?true:false;
if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var swVer2=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"";
var flashDescription=navigator.plugins["Shockwave Flash"+swVer2].description;
var descArray=flashDescription.split(" ");
var tempArrayMajor=descArray[2].split(".");
var versionMajor=tempArrayMajor[0];
var versionMinor=tempArrayMajor[1];
flashVer=parseInt(versionMajor,10)+"."+parseInt(versionMinor,10);
}}else{if(navigator.userAgent.toLowerCase().indexOf("webtv/2.6")!=-1){flashVer="4.0";
}else{if(navigator.userAgent.toLowerCase().indexOf("webtv/2.5")!=-1){flashVer="3.0";
}else{if(navigator.userAgent.toLowerCase().indexOf("webtv")!=-1){flashVer="2.0";
}else{if(lcs_isie&&isWin&&!lcs_isopera){var version="";
var axo;
try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");
version=axo.GetVariable("$version");
}catch(e){}if(!version){try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");
version="WIN 6,0,21,0";
axo.AllowScriptAccess="always";
version=axo.GetVariable("$version");
}catch(e){}}if(!version){try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3");
version="WIN 3,0,18,0";
version=axo.GetVariable("$version");
}catch(e){}}if(!version){try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
version="WIN 2,0,0,11";
}catch(e){}}if(version.indexOf(",")>0){version=version.replace(/%20/,"");
version=version.replace(/[a-zA-Z]*[^0-9]/,"");
var verArray=version.split(",");
version=parseInt(verArray[0],10)+"."+parseInt(verArray[1],10);
}flashVer=version;
}}}}}}catch(e){}lcs_bc.fv=flashVer;
}function lcs_getSLVersion(){var lcs_sl="";
try{if(navigator.plugins&&navigator.plugins.length>0){if(navigator.plugins["Silverlight Plug-In"]){lcs_sl=navigator.plugins["Silverlight Plug-In"].description;
}else{if(navigator.plugins["WPFe Plug-In"]){lcs_sl=navigator.plugins["WPFe Plug-In"].description;
}}if(lcs_sl=="1.0.30226.2"){lcs_sl="2.0.30226.2";
}}else{var wrap,obj;
if(typeof ActiveXObject!="undefined"){try{obj=new ActiveXObject("AgControl.AgControl");
}catch(e){}}else{wrap=document.createElement("div");
wrap.innerHTML='<object type="application/x-silverlight" style="position:absolute;" />';
document.body.insertBefore(wrap,document.body.firstChild);
obj=wrap.firstChild;
}if(/\bopera\b/i.test(navigator.userAgent)){for(var start=new Date().getTime();
typeof obj.isVersionSupported=="undefined"&&(new Date().getTime()-start<1000);
){}}if(typeof obj.isVersionSupported!="undefined"){for(var major=0;
major<9;
major++){for(var minor=0;
minor<=9;
minor++){var v=major+"."+minor;
if(obj.isVersionSupported(v)){lcs_sl=v;
}else{break;
}}}}if(obj){obj=null;
}if(wrap){document.body.removeChild(wrap);
}}if(lcs_sl.indexOf(".")>0){var verArray=lcs_sl.split(".");
lcs_sl=verArray[0]+"."+verArray[1];
}}catch(e){}lcs_bc.sl=lcs_sl;
}function lcs_getPlugIn(){var plArr={};
var lcs_p="";
if(navigator.plugins&&navigator.plugins.length>0){try{var piArr=navigator.plugins;
for(var i=0;
i<piArr.length;
i++){plArr[piArr[i].name]="";
}}catch(e){}}else{try{if(lcs_bc.fv!=""){plArr["Shockwave Flash"]="";
}if(lcs_bc.sl!=""){plArr.Silverlight="";
}}catch(e){}try{if(new ActiveXObject("SWCtl.SWCtl")){plArr["Shockwave Director"]="";
}}catch(e){}try{if(new ActiveXObject("rmocx.RealPlayer G2 Control")||new ActiveXObject("RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)")||new ActiveXObject("RealVideo.RealVideo(tm) ActiveX Control (32-bit)")){plArr.RealPlayer="";
}}catch(e){}try{var index=navigator.userAgent.indexOf("MSIE");
if(index!=-1){var ie_ver=parseFloat(navigator.userAgent.substring(index+4+1));
if(ie_ver<7){if(new ActiveXObject("QuickTime.QuickTime")){plArr.QuickTime="";
}if(new ActiveXObject("MediaPlayer.MediaPlayer.1")){plArr["Windows Media"]="";
}else{var obj_item=document.getElementsByTagName("object");
for(var i=0;
i<obj_item.length;
i++){if(obj_item[i].classid){var clsid=obj_item[i].classid.toUpperCase();
if(clsid=="CLSID:6BF52A52-394A-11D3-B153-00C04F79FAA6"||clsid=="CLSID:22D6F312-B0F6-11D0-94AB-0080C74C7E95"){if(new ActiveXObject("MediaPlayer.MediaPlayer.1")){plArr["Windows Media"]="";
}}}}}}}}catch(e){}}for(var index in plArr){if(typeof plArr[index]!="function"){lcs_p+=index+";";
}}lcs_bc.p=lcs_p.length?lcs_p.substr(0,lcs_p.length-1):lcs_p;
}nj.getPackage("nj.common.Template",(function(){var Template=function(){this.messages={};
};
Template.prototype={add:function(sLabel,s){if(typeof sLabel==="string"){addMessage.apply(this,[sLabel,s]);
}else{addMessages.apply(this,[sLabel]);
}},get:function(sLabel,oData){var s=getMessage.apply(this,[sLabel]);
if(!s){return;
}oData=oData||{};
s=this._replace(s,oData);
return s;
},_replace:function(s,oData){var sName,r;
for(sName in oData){r=new RegExp("\\${"+sName+"}","mgi");
s=s.replace(r,oData[sName]);
}s=s.replace(/[^\\]\$\{[^}]+\}/g,"");
s=s.replace(/\\(\$\{[^}]+\})/g,"$1");
return s;
}};
function addMessages(o){var oMessages=this.messages;
(function(o){var oTmp;
for(var i in o){!oMessages[i]&&(oMessages[i]={});
if(typeof o[i]==="object"){oTmp=oMessages;
oMessages=oMessages[i];
oMessages=arguments.callee(o[i]);
oMessages=oTmp;
}else{oMessages[i]=o[i];
}}return oMessages;
})(o);
}function addMessage(sLabel,s){var a=sLabel.split("."),o=this.messages;
for(var i=0,n=a.length;
i<n;
i++){!o[a[i]]&&(o[a[i]]={});
if(i===n-1){o[a[i]]=s;
}o=o[a[i]];
}}function getMessage(sLabel){var a=sLabel.split("."),o=this.messages;
for(var i=0,n=a.length;
i<n;
i++){o=o[a[i]];
if(!o){o="";
break;
}}return o;
}return Template;
})());
(function(){var api=new nj.common.Template;
nj.getPackage("nj.common.getAPI",function(sApiName,oParam){return api.get(sApiName,oParam);
});
nj.getPackage("nj.common.setAPI",function(sLabel,s){return api.add(sLabel,s);
});
api.add({ACCESS:"/api/${service}/access",EXTERNAL_CONNECT:"/${service}/connect",EXTERNAL_REDIRECT_CONNECT:"/${service}/connect?redirect=${redirect}",SERVICE_FRIENDS:"/api/${service}/friends/search",MINNA_MATOME_USER_LIST:"/api/user/join/list/${missionId}/${page}/${pageSize}",GROUP_MATOME_USER_LIST:"/api/group/users/${missionId}/${statusCode}/${page}/${pageSize}",GROUP_MATOME_JOIN:"/api/group/join/${missionId}",GROUP_MATOME_JOIN_ENABLE:"/api/odai/join/${missionId}/${enable}",GROUP_JOIN_ACCEPT:"/api/group/join/${missionUserId}/accept",GROUP_JOIN_PEND:"/api/group/join/${missionUserId}/pend",GROUP_REMOVE:"/api/group/remove/${missionUserId}",GROUP_INVITE:"/api/group/invite/${missionId}",GROUP_MATOME_JOIN_ENABLE:"/api/odai/join/${missionId}/${isEnable}",GROUP_MATOME_UNLOCK:"/api/group/unlock/${missionId}",GROUP_STATUS:"/api/group/status/${missionId}",GROUP_LOCK:"/api/group/lock/status/${missionId}",GROUP_USERS:"/api/group/allusers/${missionId}/${memberListPageSize}/${waitingApprovalListPageSize}/${waitingJoinListPageSize}"});
})();
nj.getPackage("nj.common.account",{login:function(){if(this.isLogin()){typeof goLogin!=="undefined"?goLogin():this._goLogin();
return false;
}return true;
},isLogin:function(){return $.cookie("NJID_AUT")!=null;
},layerLogin:function(options,fCallback){if($.isFunction(options)){fCallback=options;
options={};
}if($.cookie("NJID_AUT")==null){window.g_callback=function(){$.modal.close();
fCallback();
};
$(document.body).njLogin($.extend(true,{loginDomain:g_loginDomain,loginApi:g_loginApi,proxyUrl:g_proxyUrl,rsaKeysApi:g_rsaKeysApi,success:fCallback},options)).njLogin("view");
}else{fCallback();
}},_goLogin:function(){location.href="https://ssl.naver.jp/login?fromUrl="+encodeURIComponent(location.href);
}});
nj.getPackage("nj.common.message",$.extend(new nj.common.Template,{alert:function(sLabel,oData,bTrim){var s=this.get(sLabel,oData);
if(bTrim){s=$.trim(nj.trim);
}if(!s){return"";
}alert(s);
},confirm:function(sLabel,oData,bTrim){var s=this.get(sLabel,oData);
if(bTrim){s=$.trim(nj.trim);
}if(!s){return false;
}return confirm(s);
}}));
nj.common.message.add({COMMON:{SERVER_ERROR:"一時的な問題により、アクセスできません。しばらくしてからもう一度お試しください。",COPYRIGHT_ERROR:"この${type}は以下の理由により、追加することができません。\n1.出展元サイトからの要請によるもの。\n2.利用規約違反に接触する可能性があるもの。\n追加済みの場合は自動に削除されます。"}});
$.extend((function(){var $doc=$(document),observer=function(s,f){$doc.bind(NJOBSERVER_PREFIX+s,f);
},NJOBSERVER_PREFIX="NJOBSERVER.";
observer.notify=function(){var s=[].slice.call(arguments,0,1)[0],a=[].slice.call(arguments,1);
$doc.trigger(NJOBSERVER_PREFIX+s,a);
};
observer.remove=function(s){$doc.unbind(NJOBSERVER_PREFIX+s);
};
return{njObserver:observer};
})());
/*!
 * jQuery Cookie Plugin v1.3.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory);
}else{factory(jQuery);
}}(function($){var pluses=/\+/g;
function raw(s){return s;
}function decoded(s){return decodeURIComponent(s.replace(pluses," "));
}function converted(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\");
}try{return config.json?JSON.parse(s):s;
}catch(er){}}var config=$.cookie=function(key,value,options){if(value!==undefined){options=$.extend({},config.defaults,options);
if(typeof options.expires==="number"){var days=options.expires,t=options.expires=new Date();
t.setDate(t.getDate()+days);
}value=config.json?JSON.stringify(value):String(value);
return(document.cookie=[config.raw?key:encodeURIComponent(key),"=",config.raw?value:encodeURIComponent(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join(""));
}var decode=config.raw?raw:decoded;
var cookies=document.cookie.split("; ");
var result=key?undefined:{};
for(var i=0,l=cookies.length;
i<l;
i++){var parts=cookies[i].split("=");
var name=decode(parts.shift());
var cookie=decode(parts.join("="));
if(key&&key===name){result=converted(cookie);
break;
}if(!key){result[name]=converted(cookie);
}}return result;
};
config.defaults={};
$.removeCookie=function(key,options){if($.cookie(key)!==undefined){$.cookie(key,"",$.extend({},options,{expires:-1}));
return true;
}return false;
};
}));
$.njObserver("nj.common.log.paging",function(){try{if(typeof lcs_do!=="undefined"){lcs_do();
}}catch(e){}});
(function($){var IMAGE_SERVER="http://static.naver.jp/nvCommon",MATOME_IMAGE_SERVER=/alpha/.test(location.hostname)?"http://static.alpha.naver.jp/matome_ver4":"http://static.naver.jp/matome_ver4",REDIRECT_URL=encodeURIComponent(location.href),HTML_TMPLATE='<div id="LoginPanel"><div class="LoginPanelArea"><h1 style="width:345px;"><a href="http://naver.jp"><img width="53" height="10" class="h1logo" src="'+IMAGE_SERVER+'/img/h1_naver_s.gif" alt="NAVER"></a><img class="h1title" alt="ログイン" src="'+IMAGE_SERVER+'/img/h1_login.gif"></h1>{{if !isBookmarklet}}<p class="info">利用には無料会員登録が必要です。</p>{{/if}}<div style="display: block;" id="LoginPanelForm"><form style="margin:0px;padding:0;" name="loginForm" id="loginForm" action="#">{{if !isBookmarklet}}<div class="registerArea"><h2><a href="${naverURL}"><img alt="無料会員登録" src="'+IMAGE_SERVER+'/img/btn_register.gif"></a></h2><p>NAVERアカウントに登録すると<br>さまざまなサービスをご利用になれます。</p></div><!--/.registerArea-->{{/if}}<div class="loginArea"><h2 style="display:none;">ログインフォーム</h2><p style="display: none; " class="attention"></p><ul class="formList"><li class="nvrId"><h3 style="display:none;">メールアドレスまたはユーザー名</h3><div class="cont"><input type="text" value="" class="input required message2 name" name="name"></div></li><li class="pass"><h3 style="display:none;">パスワード</h3><div class="cont"><input type="password" value="" maxlength="30" class="input message" name="password"></div></li></ul><p class="loginBtn"><input type="image" alt="ログイン" src="'+IMAGE_SERVER+'/img/btn_login_s.gif"></p><ul class="supportNavi"><li class="idSave"><input type="checkbox" id="idSaveCheck" name="idSaveCheck"><label for="idSaveCheck"> 次回から入力を省略</label></li><li class="lost"><a href="${myInfoURL}">パスワードをお忘れの方</a></li></ul><!--20111014--><div class="linkedAccount"><p class="linkedAccountTxt">他のアカウントでログイン</p><p><a href="${facebookURL}"><img width="35" height="36" src="'+MATOME_IMAGE_SERVER+'/img/common/login/img_fb.png" alt="Facebook"></a><a href="${twitterURL}"><img width="35" height="36" src="'+MATOME_IMAGE_SERVER+'/img/common/login/img_tw.png" alt="Twitter"></a><a href="${livedoorURL}"><img width="35" height="36" src="'+MATOME_IMAGE_SERVER+'/img/common/login/img_ld.png" alt="Livedoor"></a><a href="${yahooURL}"><img width="35" height="36" src="'+MATOME_IMAGE_SERVER+'/img/common/login/img_yh.png" alt="Yahoo!"></a></p></div><!--//20111014--></div><!--/.loginArea--></form></div><!--/#LoginPanelForm-->{{if !isBookmarklet}}<div class="closeBtn simplemodal-close"><img width="9" height="9" alt="閉じる" src="'+IMAGE_SERVER+'/img/btn_close.gif"></div>{{/if}}</div><!--/.LoginPanelArea--></div>',MY_INFO_URL_BASE="https://ssl.naver.jp/reminder/form",MY_INFO_URL=MY_INFO_URL_BASE+"?fromUrl="+REDIRECT_URL,JOIN_URL_LIST={naverURL:"https://ssl.naver.jp/join?fromUrl="+REDIRECT_URL,facebookURL:"https://ssl.naver.jp/oauth/layerFacebookRequest",twitterURL:"https://ssl.naver.jp/oauth/layerTwitterRequest",livedoorURL:"https://ssl.naver.jp/openid/layerLogin/livedoor?fromUrl="+REDIRECT_URL,yahooURL:"https://ssl.naver.jp/openid/layerLogin/yahoo?fromUrl="+REDIRECT_URL},options={};
$.widget("ui.njLogin",{options:{errorTitle:"ログイン失敗",base64:true,codes:{SUCCESS:1,RSA_KEY_NAME_BLANK:100,EMAIL_BLANK:200,EMAIL_INVALID:201,MOBILE_EMAIL:202,UNREGISTERED_EMAIL:203,EMAIL_AND_PASSWORD_BLANK:210,PASSWORD_BLANK:300,PASSWORD_INVALID:301,PASSWORD_MISMATCH:302,IN_PENALTY:400,SESSION_FAIL:500,SERVER_INTERNAL_ERROR:600}},_create:function(oOptions){$.extend(this.options,oOptions);
options=this.options;
},_onRsaKeysLoad:function(){if(!nj.crypto.hasRsaKeys()){alert(nj.crypto.error.rsa);
return;
}var self=this,oForm=this.currentForm,oKeys=nj.crypto.getSplitRsaKey(),oParams={email:nj.crypto.rsaEncrypt($(this.currentElements[0]).val(),null,null,options.base64),password:nj.crypto.rsaEncrypt($(this.currentElements[1]).val(),null,null,options.base64),rsaKeyName:oKeys.keyname,autoLogin:""};
if(options.base64){oParams.enc="b";
}if(oForm.idSaveCheck.checked){oParams.autoLogin="Y";
}var sCallback="njsonp"+$.now(),data={id:sCallback,method:"POST",header:"{'Content-Type':'application/x-www-form-urlencoded; charset=utf-8','charset':'utf-8'}",proxy:options.proxyUrl,domain:"naver.jp",url:options.loginApi};
document.domain="naver.jp";
$("<iframe />",{name:"naver-login-temp",id:"naver-login-temp",style:"border:0px;width:0px;height:0px;",src:"http://"+options.loginDomain+"/ajax_remote_callback.html?"+$.param(data)+"#"+($.param(oParams).replace(/=/g,"%3D"))}).appendTo("body");
window[sCallback]=function(callback,result_txt,header){var result=$.parseJSON(result_txt),codes=options.codes;
if(result.status==codes.SUCCESS){options.success();
$.modal.close();
$("#LoginPanel").remove();
}else{$(".attention",this.currentForm).html(result.message).show();
}$("#naver-login-temp").remove();
};
},setRule:function(){var self=this,jqLoginForm=$("#loginForm");
nj.Bootloader.exec("nj.matome.login",$.proxy(function(){jqLoginForm.validate({debug:false,ignore:"",onkeyup:false,focusInvalid:false,onfocusout:false,submitHandler:function(form){var sRsaKeysApi="http://"+options.loginDomain+self.options.rsaKeysApi;
try{nj.crypto.initRsaKeys(sRsaKeysApi,self._onRsaKeysLoad,this);
}catch(e){}},showErrors:function(errorMap,errorList){if(errorList.length==0){$(".attention",this.currentForm).hide();
}else{if(errorList.length==2){if(errorList[0].message=="入力内容に誤りがあります。"){$(".attention",this.currentForm).text(errorList[0].message).show();
}else{$(".attention",this.currentForm).text("メールアドレスとパスワードが未入力です。").show();
}$(errorList[0].element).focus();
}else{$(".attention",this.currentForm).text(errorList[0].message).show();
$(errorList[0].element).focus();
}}},rules:{name:{required:true},password:{required:true},idSaveCheck:{required:false}},messages:{name:{required:"メールアドレスが未入力です。"},password:{required:"パスワードが未入力です。"}}});
$(["message","message2"]).each(function(i,s){$("#loginForm ."+s).focus(function(){$(this).removeClass(s).addClass("focus");
}).focusout(function(){if(!$(this).val()){$(this).removeClass("focus").addClass(s);
}});
});
$("#loginForm .input").keydown($.browser.msie?function($e){if($e.keyCode==13){jqLoginForm.submit();
}}:null);
},this));
},view:function(sViewType){var self=this,oTmpl={myInfoURL:MY_INFO_URL,isBookmarklet:false},oModalOptions={autoResize:true,onShow:function(dialog){self.setRule();
},onClose:function(){$.modal.close();
$("#LoginPanel").remove();
}};
if(sViewType==="matome.bookmarklet"){oTmpl={myInfoURL:MY_INFO_URL_BASE,isBookmarklet:true};
$.extend(oModalOptions,{opacity:40,overlayCss:{backgroundColor:"#000"},escClose:false});
}nj.Bootloader.exec("nj.matome.login",function(){var $loginTpl=$.tmpl(HTML_TMPLATE,$.extend({},JOIN_URL_LIST,oTmpl));
$loginTpl.find(".linkedAccount").delegate("a","click",function(e){var $btn;
e.preventDefault();
if(e.target.tagName==="A"){$btn=$(e.target);
}else{if(e.target.tagName==="IMG"){$btn=$(e.target).parent();
}else{return false;
}}window.open($btn.attr("href"),"njLogin");
return false;
});
$loginTpl.appendTo(document.body).modal(oModalOptions);
});
}});
})(jQuery);
/*! LAB.js (LABjs :: Loading And Blocking JavaScript)
    v2.0.3 (c) Kyle Simpson
    MIT License
*/
(function(o){var K=o.$LAB,y="UseLocalXHR",z="AlwaysPreserveOrder",u="AllowDuplicates",A="CacheBust",B="BasePath",C=/^[^?#]*\//.exec(location.href)[0],D=/^\w+\:\/\/\/?[^\/]+/.exec(C)[0],i=document.head||document.getElementsByTagName("head"),L=(o.opera&&Object.prototype.toString.call(o.opera)=="[object Opera]")||("MozAppearance" in document.documentElement.style),q=document.createElement("script"),E=typeof q.preload=="boolean",r=E||(q.readyState&&q.readyState=="uninitialized"),F=!r&&q.async===true,M=!r&&!F&&!L;
function G(a){return Object.prototype.toString.call(a)=="[object Function]";
}function H(a){return Object.prototype.toString.call(a)=="[object Array]";
}function N(a,c){var b=/^\w+\:\/\//;
if(/^\/\/\/?/.test(a)){a=location.protocol+a;
}else{if(!b.test(a)&&a.charAt(0)!="/"){a=(c||"")+a;
}}return b.test(a)?a:((a.charAt(0)=="/"?D:C)+a);
}function s(a,c){for(var b in a){if(a.hasOwnProperty(b)){c[b]=a[b];
}}return c;
}function O(a){var c=false;
for(var b=0;
b<a.scripts.length;
b++){if(a.scripts[b].ready&&a.scripts[b].exec_trigger){c=true;
a.scripts[b].exec_trigger();
a.scripts[b].exec_trigger=null;
}}return c;
}function t(a,c,b,d){a.onload=a.onreadystatechange=function(){if((a.readyState&&a.readyState!="complete"&&a.readyState!="loaded")||c[b]){return;
}a.onload=a.onreadystatechange=null;
d();
};
}function I(a){a.ready=a.finished=true;
for(var c=0;
c<a.finished_listeners.length;
c++){a.finished_listeners[c]();
}a.ready_listeners=[];
a.finished_listeners=[];
}function P(d,f,e,g,h){setTimeout(function(){var a,c=f.real_src,b;
if("item" in i){if(!i[0]){setTimeout(arguments.callee,25);
return;
}i=i[0];
}a=document.createElement("script");
if(f.type){a.type=f.type;
}if(f.charset){a.charset=f.charset;
}if(h){if(r){e.elem=a;
if(E){a.preload=true;
a.onpreload=g;
}else{a.onreadystatechange=function(){if(a.readyState=="loaded"){g();
}};
}a.src=c;
}else{if(h&&c.indexOf(D)==0&&d[y]){b=new XMLHttpRequest();
b.onreadystatechange=function(){if(b.readyState==4){b.onreadystatechange=function(){};
e.text=b.responseText+"\n//@ sourceURL="+c;
g();
}};
b.open("GET",c);
b.send();
}else{a.type="text/cache-script";
t(a,e,"ready",function(){i.removeChild(a);
g();
});
a.src=c;
i.insertBefore(a,i.firstChild);
}}}else{if(F){a.async=false;
t(a,e,"finished",g);
a.src=c;
i.insertBefore(a,i.firstChild);
}else{t(a,e,"finished",g);
a.src=c;
i.insertBefore(a,i.firstChild);
}}},0);
}function J(){var l={},Q=r||M,n=[],p={},m;
l[y]=true;
l[z]=false;
l[u]=false;
l[A]=false;
l[B]="";
function R(a,c,b){var d;
function f(){if(d!=null){d=null;
I(b);
}}if(p[c.src].finished){return;
}if(!a[u]){p[c.src].finished=true;
}d=b.elem||document.createElement("script");
if(c.type){d.type=c.type;
}if(c.charset){d.charset=c.charset;
}t(d,b,"finished",f);
if(b.elem){b.elem=null;
}else{if(b.text){d.onload=d.onreadystatechange=null;
d.text=b.text;
}else{d.src=c.real_src;
}}i.insertBefore(d,i.firstChild);
if(b.text){f();
}}function S(c,b,d,f){var e,g,h=function(){b.ready_cb(b,function(){R(c,b,e);
});
},j=function(){b.finished_cb(b,d);
};
b.src=N(b.src,c[B]);
b.real_src=b.src+(c[A]?((/\?.*$/.test(b.src)?"&_":"?_")+~~(Math.random()*1000000000)+"="):"");
if(!p[b.src]){p[b.src]={items:[],finished:false};
}g=p[b.src].items;
if(c[u]||g.length==0){e=g[g.length]={ready:false,finished:false,ready_listeners:[h],finished_listeners:[j]};
P(c,b,e,((f)?function(){e.ready=true;
for(var a=0;
a<e.ready_listeners.length;
a++){e.ready_listeners[a]();
}e.ready_listeners=[];
}:function(){I(e);
}),f);
}else{e=g[0];
if(e.finished){j();
}else{e.finished_listeners.push(j);
}}}function v(){var e,g=s(l,{}),h=[],j=0,w=false,k;
function T(a,c){a.ready=true;
a.exec_trigger=c;
x();
}function U(a,c){a.ready=a.finished=true;
a.exec_trigger=null;
for(var b=0;
b<c.scripts.length;
b++){if(!c.scripts[b].finished){return;
}}c.finished=true;
x();
}function x(){while(j<h.length){if(G(h[j])){try{h[j++]();
}catch(err){}continue;
}else{if(!h[j].finished){if(O(h[j])){continue;
}break;
}}j++;
}if(j==h.length){w=false;
k=false;
}}function V(){if(!k||!k.scripts){h.push(k={scripts:[],finished:true});
}}e={script:function(){for(var f=0;
f<arguments.length;
f++){(function(a,c){var b;
if(!H(a)){c=[a];
}for(var d=0;
d<c.length;
d++){V();
a=c[d];
if(G(a)){a=a();
}if(!a){continue;
}if(H(a)){b=[].slice.call(a);
b.unshift(d,1);
[].splice.apply(c,b);
d--;
continue;
}if(typeof a=="string"){a={src:a};
}a=s(a,{ready:false,ready_cb:T,finished:false,finished_cb:U});
k.finished=false;
k.scripts.push(a);
S(g,a,k,(Q&&w));
w=true;
if(g[z]){e.wait();
}}})(arguments[f],arguments[f]);
}return e;
},wait:function(){if(arguments.length>0){for(var a=0;
a<arguments.length;
a++){h.push(arguments[a]);
}k=h[h.length-1];
}else{k=false;
}x();
return e;
}};
return{script:e.script,wait:e.wait,setOptions:function(a){s(a,g);
return e;
}};
}m={setGlobalDefaults:function(a){s(a,l);
return m;
},setOptions:function(){return v().setOptions.apply(null,arguments);
},script:function(){return v().script.apply(null,arguments);
},wait:function(){return v().wait.apply(null,arguments);
},queueScript:function(){n[n.length]={type:"script",args:[].slice.call(arguments)};
return m;
},queueWait:function(){n[n.length]={type:"wait",args:[].slice.call(arguments)};
return m;
},runQueue:function(){var a=m,c=n.length,b=c,d;
for(;
--b>=0;
){d=n.shift();
a=a[d.type].apply(null,d.args);
}return a;
},noConflict:function(){o.$LAB=K;
return m;
},sandbox:function(){return J();
}};
return m;
}o.$LAB=J();
(function(a,c,b){if(document.readyState==null&&document[a]){document.readyState="loading";
document[a](c,b=function(){document.removeEventListener(c,b,false);
document.readyState="complete";
},false);
}})("addEventListener","DOMContentLoaded");
})(this);
(function(){var Bootloader,DEFAULT_OPTIONS={server:"http://static.naver.jp",project:"",tagno:""},tempLab,hasLabs={},$observer=(function(){var $d=$(document),_one=$d.one,_trigger=$d.trigger,PREFIX="nj_Bootloader_",REG_DOT=/\./g;
function getEventName(s){return PREFIX+s.replace(REG_DOT,"_");
}$d.one=function(s,f){_one.call(this,getEventName(s),f);
};
$d.trigger=function(s){_trigger.call(this,getEventName(s));
};
return $d;
})(),run,getRoot,getName;
Bootloader=function(options){var self=arguments.callee;
self.options=$.extend.call(null,true,{},self.options||DEFAULT_OPTIONS,options);
self.root=getRoot(self.options.server,self.options.project);
if(!self._hasLAB){$.each($LAB,function(name,method){self[name]=function(){method.apply(null,arguments);
return self;
};
});
self.script=function(s,options){var root,tagno;
if(hasLabs[s]){return this;
}options=options||{};
root=options.server?getRoot(options.server,options.project||self.options.project):self.root;
tagno=options.tagno||self.options.tagno;
if(tempLab){tempLab=tempLab.script.call(null,getName(root,s,tagno));
}else{tempLab=$LAB.script.call(null,getName(root,s,tagno));
}tempLab.wait(function(f){hasLabs[s]=true;
f&&f.call&&f.call();
$observer.trigger(s);
});
return this;
};
self.wait=function(){if(tempLab){tempLab=tempLab.wait.apply(null,arguments);
}else{tempLab=$LAB.wait.apply(null,arguments);
}return this;
};
self._hasLAB=true;
}return self;
};
Bootloader.exec=function(s,callback){return this.script(s).done(s,callback);
};
Bootloader.done=function(s,options){var success=$.curry(run,null,s,options||{});
if(hasLabs[s]){success();
}else{$observer.one(s,success);
}return this;
};
Bootloader.then=function(s,callback){if(hasLabs[s]){callback();
}else{$observer.one(s,callback);
}return this;
};
run=function(s,callback,options){var objTree=s.split("."),obj=window;
if($.isPlainObject(callback)){options=callback;
callback=$.noop;
}else{if($.isFunction(callback)){options=options||undefined;
}else{callback=$.noop;
options=undefined;
}}for(var i=0,n=objTree.length;
i<n;
i++){if(obj[objTree[i]]){obj=obj[objTree[i]];
}else{obj={};
break;
}}if(!obj._isRun){if($.isFunction(obj.init)){obj._isRun=true;
obj.init(options);
}else{if($.isFunction(obj)){obj._isRun=true;
obj(options);
}}}callback();
};
getRoot=(function(){var rSlash=/\/$/;
return function(server,project,name){var a=[];
server=server.replace(rSlash,"");
a.push(server);
if(project){a.push(project);
a.push("js");
}return a.join("/")+"/";
};
})();
getName=function(root,name,tagno){if(/^(https?:)?\/\//.test(name)){return name;
}else{return root+name+(tagno?"_"+tagno:"")+".js";
}};
$.fn.bootOn=(function(){var getCallback=function(name,f,returnValue){var bLoaded=false;
return function(){var that=this,args=arguments;
if(!bLoaded){Bootloader.exec(name,function(){bLoaded=true;
f.apply(that,args);
});
}else{f.apply(that,args);
}return returnValue||false;
};
};
return function(name,returnValue){var that=this,events={};
$.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error delegate bind on").split(" "),function(idx,eventName){events[eventName]=function(){var args=[];
for(var i=0,n=arguments.length;
i<n;
i++){if($.isFunction(arguments[i])){args.push(getCallback(name,arguments[i],returnValue));
}else{args.push(arguments[i]);
}}return $(that)[eventName].apply(that,args);
};
});
events.hook=function(origiEventName,callback){var eventName=origiEventName.split(".")[0]+".BootloaderHook",$elems=$(that);
$elems.one(eventName,function(e){var $el=$(this);
e.preventDefault();
e.stopPropagation();
nj.Bootloader.exec(name,function(){var result=true;
$elems.unbind(eventName);
if(callback){result=callback(e);
}result&&$el.trigger(origiEventName);
});
});
};
return events;
};
})();
nj=window.nj||{};
nj.Bootloader=Bootloader;
})();
$.widget("ui.replaceSpacerImage",{options:{path:"",target:"img",targetTagName:"IMG"},_create:function(){var options,that;
that=this;
options=this.option();
this.element.find(options.target).each(function(){return that._replace($(this));
});
},_replace:function($img){var $parent,$wrapper,nHeight,nWidth,src;
if($img.attr("data-replaceSpacerImage")){return;
}$parent=$img.parent();
nWidth=$img.width();
nHeight=$img.height();
src=$img.attr("src");
$wrapper=$("<span/>");
$wrapper.css({display:"block",width:nWidth,height:nHeight,background:"url("+src+") no-repeat left top",backgroundSize:nWidth+"px "+nHeight+"px"});
$img.attr({src:this.option("path"),width:nWidth,height:nHeight,"data-replaceSpacerImage":true}).appendTo($wrapper);
$parent.append($wrapper);
}});
(function(){var DISABLE_CLASS,ENABLE_CLASS;
ENABLE_CLASS="FnEnableAntiSaveImage";
DISABLE_CLASS="FnDisableAntiSaveImage";
$.widget("ui.antiSaveImage",{options:{target:"img",targetTagName:"IMG"},_create:function(){var fAntiDrag,options;
options=this.option();
fAntiDrag=function(e){e.preventDefault();
};
this.element.bind("contextmenu.antiSaveImage",function(e){var $img;
if(e.target.tagName===options.targetTagName){return false;
}else{$img=$(e.target).children();
if($img.length&&$img[0].tagName===options.targetTagName){return false;
}}}).delegate(options.target,"mousedown.antiSaveImage",fAntiDrag).delegate(options.target,"dragstart.antiSaveImage",fAntiDrag).delegate(options.target,"touchstart.antiSaveImage",fAntiDrag);
}});
})();
(function(){var COMMON_ROUTE_SETTING,DEFAULT_OPTION,ROUTE_SETTING,getSetting,main,sCat,_i,_len,_ref;
ROUTE_SETTING={"/":{selector:{".LyContents":{rightClick:true}}},"/odai":{path:{"^/[0-9]+$":{selector:{body:{rightClick:[".LyContents img",".MdLayer07 img",".MdLayer02 img"]}}},"^/[0-9]+/[0-9]+$":{selector:{".LyContents":{rightClick:true}}},"^/new$":{selector:{body:{rightClick:[".LyContents img",".MdPL01 img",".MdSL01 img",".MdLayer02 img",".MdQL01 img"]}}},"^/draft/[0-9]+$":{selector:{body:{rightClick:[".LyContents img",".MdPL01 img",".MdLayer07 img",".MdLayer02 img",".MdQL01 img"]}}},"^/[0-9]+/edit$":{selector:{body:{rightClick:[".LyContents img",".MdPL01 img",".MdLayer07 img",".MdLayer02 img",".MdQL01 img"]}}}}},"/topic":{path:{"^/[a-zA-Z0-9]+$":{selector:{body:{rightClick:[".LyMain img",".MdLayer02 img"]}}},"^/[a-zA-Z0-9]+/history$":{selector:{body:{rightClick:[".mdTopicBoard01Main01 img",".MdLayer02 img"]}}},"^/[a-zA-Z0-9]+/curator$":{selector:{body:{rightClick:[".LyMain img",".MdLayer02 img"]}}}}},"/topicsearch":{selector:{".LyMain":{rightClick:true}}},"/keyword":{path:{"^/$":{selector:{".LySub":{rightClick:true}}},"^/[a-z]+$":{selector:{".LySub":{rightClick:true}}}}},"/search":{selector:{".LyMain":{rightClick:true}}},"/mymatome":{path:{"^/.+$":{selector:{".LyContents":{rightClick:true}}}}},"/bp":{path:{"^/.+$":{selector:{".LyContents":{rightClick:true}}}}},"/favorites":{selector:{body:{rightClick:[".LyContents img",".mdLayer08FVItem img"]}}},"/feeds":{selector:{body:{rightClick:".LyContents img"}},path:{"^/list/[0-9]+$":{selector:{body:{rightClick:".LyContents img"}}},"^/[0-9]*":{selector:{body:{rightClick:".LyContents img"}}}}},"/works":{selector:{".LyContents":{rightClick:true}}},"/notifications":{path:{"^(/.*)?$":{selector:{body:{rightClick:true}}}}},"/settings":{selector:{body:{rightClick:[".LyContents img",".MdLayer02 img"]}}},"/connections":{selector:{".LySub":{rightClick:true}}},"/incentive":{path:{"^/.*$":{selector:{".LySub":{rightClick:true}}}}},"/analytics":{path:{"^/[0-9]+$":{selector:{".LyContents":{rightClick:true}}},"^/all$":{selector:{".LySub":{rightClick:true}}}}},"/competition":{path:{"^/2012/list.*$":{selector:{".mdMTMList01List":{rightClick:true}}},"^/2012/award.*$":{selector:{".MdPrize01":{rightClick:true},".MdPrize02List":{rightClick:true}}},"^/2012/.+":{selector:{".mdForm01Body":{rightClick:true}}}}}};
_ref=["/girls","/news","/entertainment","/spot","/life","/recipe","/wellness","/business","/tech","/design","/trivia","/humor","/popular"];
for(_i=0,_len=_ref.length;
_i<_len;
_i++){sCat=_ref[_i];
ROUTE_SETTING[sCat]=ROUTE_SETTING["/"];
}COMMON_ROUTE_SETTING=[{selector:{".lyHeadNav":{rightClick:true}}}];
DEFAULT_OPTION={currentPath:"/",spacerImage:""};
nj.getPackage("nj.matome.common.imageControl",function(options){main.init($.extend({},DEFAULT_OPTION,options));
});
main={init:function(options){var oCom,oSetting,_j,_len1;
this.options=options;
oSetting=getSetting(ROUTE_SETTING,this.options.currentPath);
if(oSetting){this._setting(oSetting.selector);
}for(_j=0,_len1=COMMON_ROUTE_SETTING.length;
_j<_len1;
_j++){oCom=COMMON_ROUTE_SETTING[_j];
this._setting(oCom.selector);
}},_setting:function(oSetting){var $base,sSel,sTarget;
for(sSel in oSetting){$base=$(sSel);
if(oSetting[sSel].rightClick){sTarget=this._getTargetSelector(oSetting[sSel].rightClick);
this._preventionRightClick($base,sTarget);
}}},_preventionRightClick:function($base,sTarget){$base.antiSaveImage({target:sTarget});
},_moveBackground:function($base,sTarget){$base.replaceSpacerImage({path:this.options.spacerImage,target:sTarget});
},_getTargetSelector:function(selector){var sTarget;
sTarget=selector===true?"img":selector;
if($.isArray(selector)){sTarget=selector.join(",");
}return sTarget;
}};
getSetting=function(oRouteSetting,sPath){var aMatches,oSetting,oSubSetting,sReg,sRoot;
oSetting=oRouteSetting[sPath]||false;
if(!oSetting||oSetting.path){aMatches=sPath.match(/^\/([a-z]+)(\/.*)?$/)||[];
sRoot=aMatches[1]?"/"+aMatches[1]:"/";
sPath=aMatches[2]||"";
if(sRoot){oSubSetting=oRouteSetting[sRoot];
if(oSubSetting){for(sReg in oSubSetting.path){if(RegExp(sReg).test(sPath)){oSetting=oSubSetting.path[sReg];
break;
}}}}}return oSetting;
};
nj.matome.common.imageControl.getSetting=getSetting;
$(function(){nj.matome.common.imageControl({currentPath:location.pathname});
});
})();


/* @release 1380010682 */
