<div style="background-color: #2c3e50;">
  <div class="container">
    <div class="row">
      <div class="col-sm-4 col-sm-push-8 mvl">
        <div id="_bubble" class="pal" style="background-color: #ecf0f1; border-radius: 6px;">
          <div><a id="_return" class="text-muted" href="./">返回总结</a></div>
          <button id="_forceRender" style="color: #c0392b; font-size: 18px;" class="btn btn-link pan">重新生成</button>
          <div id="_src"><a>图片地址</a></div>
          <!-- Baidu Button BEGIN -->
          <div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a><a href="#" class="bds_t163" data-cmd="t163" title="分享到网易微博"></a></div>
          <!-- Baidu Button END -->
        </div>
      </div>
      <div class="col-sm-8 col-sm-pull-4 mvl clearfix">
        <div class="pal pull-right" style="width: 480px; background-color: #ecf0f1; border-radius: 6px;">
          <img id="_chang" src="/images/loading.gif" style="display: block;margin: 0 auto;">
          <div id="_loading">
            <img src="/images/loading.gif" style="display: block;margin: 0 auto;">
            <div class="mtl text-center" style="font-size: 20px;line-height: 1;">正在生成长微博</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<% include ../_toTop.html %>

<script>
  (function () {
    var id = /\/topic\/(\w+)/i.exec(location.pathname)[1];
    window._bd_share_config = {"common": {"bdSnsKey": {}, "bdText": "", "bdMini": "2", "bdMiniList": false, "bdUrl": location.href.replace('/share_chang', ''), "bdPic": 'http://' + location.host + '/chang/' + id, "bdStyle": "1", "bdSize": "16"}, "share": {}};
    with (document)0[(getElementsByTagName('head')[0] || body).appendChild(createElement('script')).src = 'http://bdimg.share.baidu.com/static/api/js/share.js?v=86835285.js?cdnversion=' + ~(-new Date() / 36e5)];

    $(function () {
      var $loading = $('#_loading');
      var $chang = $('#_chang');
      var $bubble = $('#_bubble');
      var $src = $('#_src');
      var $src_a = $src.find('a');
      var $force = $('#_forceRender');
      var $baidu = $('.bdsharebuttonbox');
      $chang.on('load abort error', function () {
        $loading.hide();
        $chang.show();
        $force.show();
      });
      $chang.on('load', function () {
        $bubble.css('width', '180px');
        $src.show();
        $baidu.show();
      });
      function create(forceRender) {
        $loading.show();

        $bubble.css('width', '115px');
        $src.hide();
        $baidu.hide();
        $force.hide();

        $src_a.attr('href', '/chang/' + id);
        $chang.attr('src', '/chang/' + id + '?' + new Date().getTime() + (forceRender ? '&force=1' : '') );
        $chang.hide();
      }
      create();
      $force.click(function () {
        create(true);
      });
    });
  })();
</script>