<ion-header-bar class="bar-stable">
  <div class="buttons">
    <a class="button button-icon icon ion-ios7-arrow-back" href="/"></a>
  </div>

  <h1 class="title">
    # <%= locals.topic.text %> #
  </h1>

  <div class="buttons">
    <button menu-toggle="right" class="button button-icon icon ion-navicon"></button>
  </div>
</ion-header-bar>

<ion-content scroll="false" class="stable-bg"
             ng-init="yourself = <%= JSON.stringify(locals.yourself && {
                      _id: locals.yourself._id,
                      loginName: locals.yourself.loginName,
                      url: locals.yourself.url
                    }) %>;"
             ng-controller="TopicCtrl">
  <div style="height: 100%;">
    <ion-slide-box style="height: 100%;" pager-click="activeIndex = index;" active-slide="activeIndex">

      <% include ./_ul.html %>

    </ion-slide-box>
  </div>

  <script id="comment.html" type="text/ng-template">
    <div id="_comment" class="modal item item-avatar">
      <img style="border-radius: 50%;"
           ng-src="{{yourself.url || '/images/no_img/user_80x80.png'}}">
      <h2>
        <a ng-show="yourself" href="/u/{{yourself.loginName}}">{{yourself.loginName}}</a>
        <span ng-show="!yourself" class="text-muted">匿名用户</span>
      </h2>
      <form class="mtm" ng-submit="submit(item, $parent)" style="position: relative;">
        <input type="text"
               ng-model="$parent.comment" maxlength="140"
               placeholder="发表评论"/>
        <div class="LetterCounter positive">
          {{comment.length || 0}}/140
        </div>
      </form>
    </div>
  </script>
</ion-content>