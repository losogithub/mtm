<ion-slide style="height: 100%;"
           ng-repeat="item in slidesItems">
<ion-scroll style="height: 100%;">
<div class="container padding-bottom">

  <h2 class="text-center" style="margin-top: 20px;">
    <a href="/t/{{item.topic.text}}">
      <span class="text-muted">#</span>
      {{item.topic.text}}
      <span class="text-muted">#</span>
      <span class="badge badge-assertive" style="vertical-align: middle;"
            ng-show="item.topic.itemCount - 1">
        {{item.topic.itemCount}}
      </span>
    </a>
  </h2>

  <div class="Item list card">
    <div class="item item-body" ng-class="item.type" ng-switch="item.type">
      <div class="Title" title="{{item.snippet || ''}}" ng-switch-when="LINK">
        <img class="Fav" ng-src="{{item.fav}}"
             ui-event="{ error : 'onFavError(item)' }">
        <a target="_blank" class="LINK_URL" href='{{item.url}}'>{{item.title}}</a>
      </div>

      <div style="margin: -15px -15px 0;" ng-switch-when="IMAGE">
        <div class="text-center">
          <a href='{{item.url}}' style="display: block;"
             title="{{item.title || ''}}">
            <img class="img-responsive" style="margin: auto;"
                 onerror="shizier.errorImage(this,'default_120x120');"
                 ng-src="{{item.url}}" alt="{{item.title || ''}}">
          </a>
        </div>

        <h2 class="text-center"
            ng-show="item.title"
            style="margin: 10px 0; font-size: 20px; font-weight: bold;">
          {{item.title}}
        </h2>
      </div>

      <div ng-switch-when="VIDEO">

        <div class="VideoWrapper" style="margin: -15px -15px 0;">
          <button class="Cover button" style="margin: 15px 15px 0;"
                  type="button" ng-if="!item.playing"
                  ng-click="playVideo(item)"
                  ng-style="{'background-image':'url({{item.cover}})'}">
            <div class="Background">
              <i class="fa fa-play-circle"></i>
            </div>
          </button>
          <div class="Player" ng-if="item.playing" ng-show="item.show">
            <button name="close" class="button button-clear button-block"
                    ng-click="item.playing = false;item.show = false;"
                    type="button"><i class="fa fa-caret-up"></i> 收起</button>
            <!--src为空会导致ie一直等待，localhost响应最快-->
            <embed style="display: block;"
                   src="about:blank"
                   ng-src="{{getVideoSrc(item)}}"
                   flashvars="{{getVideoVars(item)}}"
                   width="{{item.width}}"
                   height="{{item.height}}"
                   type="application/x-shockwave-flash"
                   allowscriptaccess="always"
                   allowfullscreen="true"
                   wmode="opaque"
                   quality="high"></embed>
          </div>
        </div>

        <h2 ng-show="item.title"
          style="margin: 10px 0; font-size: 20px; font-weight: bold;">
          {{item.title}}
        </h2>
      </div>

      <div class="Cite" ng-switch-when="CITE">
        <i class="fa fa-quote-left text-muted"></i>
        <q ng-bind-html="getHtml(item.cite)"></q>
      </div>

      <div ng-switch-when="WEIBO">
        <div class="clearfix">
          <a target="_blank"  class="Avatar AuthorUrl img-circle"
             href="http://weibo.com/{{item.user.profile_url}}">
            <img class="img-circle"
                 ng-src="{{item.user.profile_image_url}}"
                 alt="{{item.user.screen_name}}">
          </a>

          <div style="overflow: hidden;">
            <a target="_blank" class="ScreenName AuthorUrl"
               href="http://weibo.com/{{item.user.profile_url}}">
              <span class="ScreenName">{{item.user.screen_name}}</span>
            </a>
            <a target="_blank" class="Verify"
               ng-class="!item.user.verified ? '' : item.user.verified_type ? 'ORG' : 'PERSONAL'"
               href="http://verified.weibo.com/verify"><b>V</b></a>
          </div>
        </div>

        <div class="Text" ng-bind-html="getWeiboHtml(item.parsed_text)"></div>
        <div class="Pic clearfix" ng-if="item.pic_urls && item.pic_urls.length"
             style="{{item.pic_urls && item.pic_urls.length == 4 ? 'width: 170px;' : ''}}">
          <a target="_blank" class="WeiboImage fancybox" rel="gallery"
             ng-if="item.pic_urls.length == 1 && item.pic_urls[0]"
             href="{{item.pic_urls[0].thumbnail_pic.replace('/thumbnail/', '/large/')}}"><img
            ng-src="{{item.pic_urls[0].thumbnail_pic}}"></a>
          <a target="_blank" class="WeiboImage fancybox" rel="gallery"
             ng-if="item.pic_urls.length > 1 && pic"
             ng-repeat="pic in item.pic_urls"
             href="{{pic.thumbnail_pic.replace('/thumbnail/', '/large/')}}"><img
            ng-src="{{pic.thumbnail_pic.replace('/thumbnail/', '/square/')}}"></a>
        </div>
        <div class="Retweeted clearfix" ng-init="reItem = item.retweeted_status;"
             ng-if="item.retweeted_status && item.retweeted_status.idstr">
          <a target="_blank" class="Author AuthorUrl"
             href="http://weibo.com/{{reItem.user.profile_url}}">
            @<span class="ScreenName">{{reItem.user.screen_name}}</span>
          </a>
          <a target="_blank" class="Verify"
             ng-class="!reItem.user.verified ? '' : reItem.user.verified_type ? 'ORG' : 'PERSONAL'"
             href="http://verified.weibo.com/verify"><b>V</b></a>
          <div class="Text" ng-bind-html="getWeiboHtml(reItem.parsed_text)"></div>
          <div class="Pic clearfix" ng-if="reItem.pic_urls && reItem.pic_urls.length"
               style="{{reItem.pic_urls && reItem.pic_urls.length == 4 ? 'width: 170px;' : ''}}">
            <a target="_blank" class="WeiboImage fancybox" rel="gallery"
               ng-if="reItem.pic_urls.length == 1 && reItem.pic_urls[0]"
               href="{{reItem.pic_urls[0].thumbnail_pic.replace('/thumbnail/', '/large/')}}"><img
              ng-src="{{reItem.pic_urls[0].thumbnail_pic}}"></a>
            <a target="_blank" class="WeiboImage fancybox" rel="gallery"
               ng-if="reItem.pic_urls.length > 1 && pic"
               ng-repeat="pic in reItem.pic_urls"
               href="{{pic.thumbnail_pic.replace('/thumbnail/', '/large/')}}"><img
              ng-src="{{pic.thumbnail_pic.replace('/thumbnail/', '/square/')}}"></a>
          </div>
          <a target="_blank" class="Time text-muted pull-left"
             href="http://weibo.com/{{reItem.user.idstr}}/{{reItem.mid62}}"
            >{{reItem.time}}</a>
          <div class="Handle">
            <a target="_blank" class="Forward text-muted mrs"
               href="http://weibo.com/{{reItem.user.idstr}}/{{reItem.mid62}}?type=repost"
              ><i class="fa fa-share"></i> 转发</a>
            <a target="_blank" class="Comment text-muted"
               href="http://weibo.com/{{reItem.user.idstr}}/{{reItem.mid62}}"
              ><i class="fa fa-comment-o"></i> 评论</a>
          </div>
          <div class="clearfix"></div>
        </div>
        <a target="_blank" class="Time text-muted pull-left"
           href="http://weibo.com/{{item.user.idstr}}/{{item.mid62}}">{{item.time}}</a>
        <div class="Handle">
          <a target="_blank" class="Forward text-muted mrs"
             href="http://weibo.com/{{item.user.idstr}}/{{item.mid62}}?type=repost"
            ><i class="fa fa-share"></i> 转发</a>
          <a target="_blank" class="Comment text-muted"
             href="http://weibo.com/{{item.user.idstr}}/{{item.mid62}}"
            ><i class="fa fa-comment-o"></i> 评论</a>
        </div>
        <div class="clearfix"></div>
      </div>

      <div style="margin: 10px 0;" ng-show="item.description">
        {{item.description}}
      </div>

      <div style="margin: 10px 0;">
        <a href="/u/{{item.author.loginName}}">
          <img class="img-circle" style="border-radius: 50%;"
               width="20" height="20"
               ng-src="{{item.author.url || '/images/no_img/user_80x80.png'}}">
          {{item.author.loginName}}
        </a>
      </div>

      <div class="text-muted" style="font-size: 12px; margin: 10px 0;">
        发布于
        {{item.create_at}}
      </div>

      <div class="text-muted text-right" style="font-size: 12px;">
        来自 <i class="fa fa-globe"></i>
        <a class="text-muted" target="_blank" href="{{item.quote || item.url || ''}}">
          {{item.quoteDomain || ''}}
        </a>
      </div>
    </div>
  </div>

  <div class="text-center" ng-show="item.comments.length">
    <i class="fa fa-comment-o"></i>
    共{{item.comments.length}}条评论，
    <a class="positive" style="cursor: pointer;" ng-click="openModal(item);">发表评论</a>
  </div>

  <div class="list card">
    <div class="item item-avatar" ng-repeat="comment in item.comments">
      <img style="border-radius: 50%;"
           ng-src="{{comment.author && comment.author.url || '/images/no_img/user_80x80.png'}}">
      <h2 class="clearfix">
        <button class="button button-icon pull-right mlm" style="line-height: 1; min-height: 0;"
                ng-class="comment.liked ? 'text-muted' : 'text-danger'"
                ng-click="like(comment)"
                type="button">
          <span class="text-muted">{{comment.like || ''}}</span> <i class="fa fa-thumbs-o-up"></i>
        </button>
        <a href="/u/{{comment.author.loginName}}" ng-show="comment.author">
          {{comment.author.loginName}}
        </a>
        <span class="text-muted" ng-show="!comment.author">匿名用户</span>
      </h2>
      <div class="text-muted" style="font-size: 12px; margin-bottom: 10px;">
        发表于
        {{comment.createDate}}
      </div>
      <p>{{comment.text}}</p>
    </div>
    <button class="item item-positive button-block stable-bg" ng-click="openModal(item);">
      发表评论
    </button>
  </div>

  <h2 class="text-center" style="font-size: 12px;margin-bottom: 60px;"
      ng-show="item.topic.itemCount - 1">
    <span class="text-muted">#</span>
    <a href="/t/{{item.topic.text}}">
      {{item.topic.text}}
    </a>
    <span class="text-muted">#</span>
    <span class="text-muted">
      还有{{item.topic.itemCount - 1}}个石子儿…
    </span>
  </h2>
  <p style="margin-bottom: 60px;"
     ng-show="!(item.topic.itemCount - 1)">
  </p>
</div>
</ion-scroll>
</ion-slide>