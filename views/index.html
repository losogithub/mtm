
<% include _band.html %>

<% if (featuredTopics && featuredTopics.length > 2) { %>
<div ng-non-bindable id="featuredTopics" class="carousel slide" data-ride="carousel">
  <!-- Indicators -->
  <ol class="carousel-indicators">
    <li data-target="#featuredTopics" data-slide-to="0" class="active"></li>
    <li data-target="#featuredTopics" data-slide-to="1"></li>
    <li data-target="#featuredTopics" data-slide-to="2"></li>
  </ol>

  <!-- Wrapper for slides -->
  <div class="carousel-inner">
    <% for (var i = 0; i < 3; i++) { %>
    <div class="item <%= i == 0 ? 'active' : '' %>"
         style="background: url(<%= featuredTopics[i].cover_url %>) no-repeat top; background-size: cover;">
      <div>
        <div class="container">
          <div class="row">
            <div class="col-sm-7 col-lg-6 hidden-xs">
              <a class="Cover pull-right" href="/topic/<%= featuredTopics[i]._id %>">
                <img class="pull-right" src="<%= featuredTopics[i].cover_url %>" alt="<%= featuredTopics[i].title %>" title="<%= featuredTopics[i].title %>">
              </a>
            </div>
            <div class="col-sm-5 col-lg-6 Text">
              <div style="vertical-align: bottom; position: relative;">
                <h2 class="h6" style="position: absolute;bottom: 0; width: 100%;">
                  <a class="text-inverse" href="/topic/<%= featuredTopics[i]._id %>"><%= featuredTopics[i].title %></a></h2>
              </div>
              <div>
                <p><a class="text-inverse" href="/u/<%= featuredTopics[i].author_name %>" title="<%= featuredTopics[i].author_name %>">
                  <img width="30" height="30" class="img-circle" style="display: inline-block; width: 30px; height: 30px;"
                       src="<%= featuredTopics[i].author_url || '/images/no_img/user_80x80.png' %>"
                       alt="<%= featuredTopics[i].author_name %>"
                       onerror="shizier.errorImage(this,'user_80x80');">
                  <%= featuredTopics[i].author_name %>
                </a></p>
                <p class="hidden-xs mtm text-muted" style="max-height: 120px; overflow: hidden;"><%= featuredTopics[i].description %></p>
                <p class="text-muted text-right" style="font-size: 14px;">
                  <i class="fa fa-puzzle-piece"></i> 策展了来自
                  <b class="text-inverse"><%= Topic[featuredTopics[i]._id] && Topic[featuredTopics[i]._id].siteCount || 0 %></b>
                  个网站的
                  <span class="text-inverse"><%= Topic[featuredTopics[i]._id] && Topic[featuredTopics[i]._id].urlCount || 0 %></span>
                  条碎片信息
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <% } %>
  </div>

  <!-- Controls -->
  <a class="left carousel-control" href="#featuredTopics" data-slide="prev">
    <i class="fa fa-chevron-left"></i>
  </a>
  <a class="right carousel-control" href="#featuredTopics" data-slide="next">
    <i class="fa fa-chevron-right"></i>
  </a>
</div>
<% } %>

<div class="background-clouds">
  <div class="container pbl">

    <% var temp = {'生活':'life','娱乐':'entertainment','新闻':'news','科技':'tech','文化':'culture'}; %>
    <% var temp2 = {'生活':'cutlery','娱乐':'music','新闻':'globe','科技':'rocket','文化':'book'}; %>
    <% var temp3 = {'生活':'muted','娱乐':'warning','新闻':'info','科技':'danger','文化':'black'}; %>
    <% for (var key in temp) { %>
    <h1 class="h6 mvn text-default mtl">
      <i class="fa fa-<%= temp2[key] %> text-<%= temp3[key] %>"></i> <%= key %>
    </h1>
    <div class="row">
      <div class="col-md-5 col-lg-4">

        <% var tags = categoryTags[key] %>
        <% include _tags.html %>

        <% var authors = categoryAuthors[key] %>
        <% include _authors.html %>

      </div>
      <div class="col-md-7 col-lg-8">

        <% var topics = categoryTopics[key].slice(0, 3); %>
        <% include _topics.html %>
      </div>
    </div>
    <a class="text-muted pull-right mrm" href="/<%= temp[key] %>">
      <span style="font-size: 14px;">更多<%=key%>策展></span>
    </a>
    <div class="clearfix"></div>
    <% } %>

  </div>
</div>